"use strict";exports.id=7873,exports.ids=[7873],exports.modules={57873:(Dn,Vs,d)=>{d.d(Vs,{getDefaultRoleAssumer:()=>Ns,getDefaultRoleAssumerWithWebIdentity:()=>Bs});var ce=d(50305),ae=d(34546),ss=d(8029),i=d(93980);const Zs=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),ts={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class x extends i.TJ{constructor(t){super(t),Object.setPrototypeOf(this,x.prototype)}}class de extends x{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,de.prototype)}}class le extends x{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,le.prototype)}}class me extends x{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,me.prototype)}}class ue extends x{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,ue.prototype)}}class fe extends x{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,fe.prototype)}}class he extends x{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,he.prototype)}}class ye extends x{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,ye.prototype)}}class ge extends x{constructor(t){super({name:"InvalidAuthorizationMessageException",$fault:"client",...t}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,ge.prototype)}}const H=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:i.$H}}),Xs=e=>({...e,...e.Credentials&&{Credentials:H(e.Credentials)}}),$n=e=>({...e,...e.SAMLAssertion&&{SAMLAssertion:SENSITIVE_STRING}}),Wn=e=>({...e,...e.Credentials&&{Credentials:H(e.Credentials)}}),Qs=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:i.$H}}),Js=e=>({...e,...e.Credentials&&{Credentials:H(e.Credentials)}}),Mn=e=>({...e,...e.Credentials&&{Credentials:H(e.Credentials)}}),kn=e=>({...e,...e.Credentials&&{Credentials:H(e.Credentials)}}),Kn=e=>({...e,...e.Credentials&&{Credentials:H(e.Credentials)}});var Ys=d(12763),qs=d(45845);const Ae=(e,t)=>(0,qs.w)(e,t).then(s=>{if(s.length){const n=new Ys.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(C,p)=>p.trim()===""&&p.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o;try{o=n.parse(s,!0)}catch(C){throw C&&typeof C=="object"&&Object.defineProperty(C,"$responseBodyText",{value:s}),C}const a="#text",r=Object.keys(o)[0],h=o[r];return h[a]&&(h[r]=h[a],delete h[a]),(0,i.rm)(h)}return{}}),et=async(e,t)=>{const s=await Ae(e,t);return s.Error&&(s.Error.message=s.Error.message??s.Error.Message),s},zn=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"};var Se=d(90130);const st=async(e,t)=>{const s=$;let n;return n=L({...ft(e,t),[M]:Nt,[F]:W}),D(t,s,"/",void 0,n)},Fn=async(e,t)=>{const s=$;let n;return n=L({...ht(e,t),[M]:Bt,[F]:W}),D(t,s,"/",void 0,n)},tt=async(e,t)=>{const s=$;let n;return n=L({...yt(e,t),[M]:Vt,[F]:W}),D(t,s,"/",void 0,n)},Ln=async(e,t)=>{const s=$;let n;return n=L({...gt(e,t),[M]:Zt,[F]:W}),D(t,s,"/",void 0,n)},Gn=async(e,t)=>{const s=$;let n;return n=L({...At(e,t),[M]:Xt,[F]:W}),D(t,s,"/",void 0,n)},On=async(e,t)=>{const s=$;let n;return n=L({...St(e,t),[M]:Qt,[F]:W}),D(t,s,"/",void 0,n)},Un=async(e,t)=>{const s=$;let n;return n=L({...Et(e,t),[M]:Jt,[F]:W}),D(t,s,"/",void 0,n)},Hn=async(e,t)=>{const s=$;let n;return n=L({...Rt(e,t),[M]:Yt,[F]:W}),D(t,s,"/",void 0,n)},jn=async(e,t)=>{const s=$;let n;return n=L({...Ct(e,t),[M]:qt,[F]:W}),D(t,s,"/",void 0,n)},nt=async(e,t)=>{if(e.statusCode>=300)return w(e,t);const s=await Ae(e.body,t);let n={};return n=_t(s.AssumeRoleResult,t),{$metadata:A(e),...n}},Nn=async(e,t)=>{if(e.statusCode>=300)return w(e,t);const s=await parseBody(e.body,t);let n={};return n=bt(s.AssumeRoleWithSAMLResult,t),{$metadata:A(e),...n}},ot=async(e,t)=>{if(e.statusCode>=300)return w(e,t);const s=await Ae(e.body,t);let n={};return n=xt(s.AssumeRoleWithWebIdentityResult,t),{$metadata:A(e),...n}},Bn=async(e,t)=>{if(e.statusCode>=300)return w(e,t);const s=await parseBody(e.body,t);let n={};return n=Tt(s.AssumeRootResult,t),{$metadata:A(e),...n}},Vn=async(e,t)=>{if(e.statusCode>=300)return w(e,t);const s=await parseBody(e.body,t);let n={};return n=wt(s.DecodeAuthorizationMessageResult,t),{$metadata:A(e),...n}},Zn=async(e,t)=>{if(e.statusCode>=300)return w(e,t);const s=await parseBody(e.body,t);let n={};return n=Wt(s.GetAccessKeyInfoResult,t),{$metadata:A(e),...n}},Xn=async(e,t)=>{if(e.statusCode>=300)return w(e,t);const s=await parseBody(e.body,t);let n={};return n=Mt(s.GetCallerIdentityResult,t),{$metadata:A(e),...n}},Qn=async(e,t)=>{if(e.statusCode>=300)return w(e,t);const s=await parseBody(e.body,t);let n={};return n=kt(s.GetFederationTokenResult,t),{$metadata:A(e),...n}},Jn=async(e,t)=>{if(e.statusCode>=300)return w(e,t);const s=await parseBody(e.body,t);let n={};return n=Kt(s.GetSessionTokenResult,t),{$metadata:A(e),...n}},w=async(e,t)=>{const s={...e,body:await et(e.body,t)},n=en(e,s.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await rt(s,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await lt(s,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await mt(s,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await ut(s,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await ct(s,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await dt(s,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await it(s,t);case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await at(s,t);default:const o=s.body;return jt({output:e,parsedBody:o.Error,errorCode:n})}},rt=async(e,t)=>{const s=e.body,n=Dt(s.Error,t),o=new de({$metadata:A(e),...n});return(0,i.Mw)(o,s)},it=async(e,t)=>{const s=e.body,n=zt(s.Error,t),o=new ye({$metadata:A(e),...n});return(0,i.Mw)(o,s)},ct=async(e,t)=>{const s=e.body,n=Ft(s.Error,t),o=new fe({$metadata:A(e),...n});return(0,i.Mw)(o,s)},at=async(e,t)=>{const s=e.body,n=Lt(s.Error,t),o=new ge({$metadata:A(e),...n});return(0,i.Mw)(o,s)},dt=async(e,t)=>{const s=e.body,n=Gt(s.Error,t),o=new he({$metadata:A(e),...n});return(0,i.Mw)(o,s)},lt=async(e,t)=>{const s=e.body,n=Ot(s.Error,t),o=new le({$metadata:A(e),...n});return(0,i.Mw)(o,s)},mt=async(e,t)=>{const s=e.body,n=Ut(s.Error,t),o=new me({$metadata:A(e),...n});return(0,i.Mw)(o,s)},ut=async(e,t)=>{const s=e.body,n=Ht(s.Error,t),o=new ue({$metadata:A(e),...n});return(0,i.Mw)(o,s)},ft=(e,t)=>{const s={};if(e[z]!=null&&(s[z]=e[z]),e[Z]!=null&&(s[Z]=e[Z]),e[_]!=null){const n=ne(e[_],t);e[_]?.length===0&&(s.PolicyArns=[]),Object.entries(n).forEach(([o,a])=>{const r=`PolicyArns.${o}`;s[r]=a})}if(e[v]!=null&&(s[v]=e[v]),e[g]!=null&&(s[g]=e[g]),e[Q]!=null){const n=os(e[Q],t);e[Q]?.length===0&&(s.Tags=[]),Object.entries(n).forEach(([o,a])=>{const r=`Tags.${o}`;s[r]=a})}if(e[je]!=null){const n=vt(e[je],t);e[je]?.length===0&&(s.TransitiveTagKeys=[]),Object.entries(n).forEach(([o,a])=>{const r=`TransitiveTagKeys.${o}`;s[r]=a})}if(e[pe]!=null&&(s[pe]=e[pe]),e[X]!=null&&(s[X]=e[X]),e[J]!=null&&(s[J]=e[J]),e[I]!=null&&(s[I]=e[I]),e[Me]!=null){const n=Pt(e[Me],t);e[Me]?.length===0&&(s.ProvidedContexts=[]),Object.entries(n).forEach(([o,a])=>{const r=`ProvidedContexts.${o}`;s[r]=a})}return s},ht=(e,t)=>{const s={};if(e[z]!=null&&(s[z]=e[z]),e[$e]!=null&&(s[$e]=e[$e]),e[Le]!=null&&(s[Le]=e[Le]),e[_]!=null){const n=ne(e[_],t);e[_]?.length===0&&(s.PolicyArns=[]),Object.entries(n).forEach(([o,a])=>{const r=`PolicyArns.${o}`;s[r]=a})}return e[v]!=null&&(s[v]=e[v]),e[g]!=null&&(s[g]=e[g]),s},yt=(e,t)=>{const s={};if(e[z]!=null&&(s[z]=e[z]),e[Z]!=null&&(s[Z]=e[Z]),e[Ve]!=null&&(s[Ve]=e[Ve]),e[ke]!=null&&(s[ke]=e[ke]),e[_]!=null){const n=ne(e[_],t);e[_]?.length===0&&(s.PolicyArns=[]),Object.entries(n).forEach(([o,a])=>{const r=`PolicyArns.${o}`;s[r]=a})}return e[v]!=null&&(s[v]=e[v]),e[g]!=null&&(s[g]=e[g]),s},gt=(e,t)=>{const s={};if(e[He]!=null&&(s[He]=e[He]),e[rs]!=null){const n=ns(e[rs],t);Object.entries(n).forEach(([o,a])=>{const r=`TaskPolicyArn.${o}`;s[r]=a})}return e[g]!=null&&(s[g]=e[g]),s},At=(e,t)=>{const s={};return e[ve]!=null&&(s[ve]=e[ve]),s},St=(e,t)=>{const s={};return e[N]!=null&&(s[N]=e[N]),s},Et=(e,t)=>({}),Rt=(e,t)=>{const s={};if(e[we]!=null&&(s[we]=e[we]),e[v]!=null&&(s[v]=e[v]),e[_]!=null){const n=ne(e[_],t);e[_]?.length===0&&(s.PolicyArns=[]),Object.entries(n).forEach(([o,a])=>{const r=`PolicyArns.${o}`;s[r]=a})}if(e[g]!=null&&(s[g]=e[g]),e[Q]!=null){const n=os(e[Q],t);e[Q]?.length===0&&(s.Tags=[]),Object.entries(n).forEach(([o,a])=>{const r=`Tags.${o}`;s[r]=a})}return s},Ct=(e,t)=>{const s={};return e[g]!=null&&(s[g]=e[g]),e[X]!=null&&(s[X]=e[X]),e[J]!=null&&(s[J]=e[J]),s},ne=(e,t)=>{const s={};let n=1;for(const o of e){if(o===null)continue;const a=ns(o,t);Object.entries(a).forEach(([r,h])=>{s[`member.${n}.${r}`]=h}),n++}return s},ns=(e,t)=>{const s={};return e[Ze]!=null&&(s[Ze]=e[Ze]),s},It=(e,t)=>{const s={};return e[We]!=null&&(s[We]=e[We]),e[Ce]!=null&&(s[Ce]=e[Ce]),s},Pt=(e,t)=>{const s={};let n=1;for(const o of e){if(o===null)continue;const a=It(o,t);Object.entries(a).forEach(([r,h])=>{s[`member.${n}.${r}`]=h}),n++}return s},pt=(e,t)=>{const s={};return e[Te]!=null&&(s[Te]=e[Te]),e[Be]!=null&&(s[Be]=e[Be]),s},vt=(e,t)=>{const s={};let n=1;for(const o of e)o!==null&&(s[`member.${n}`]=o,n++);return s},os=(e,t)=>{const s={};let n=1;for(const o of e){if(o===null)continue;const a=pt(o,t);Object.entries(a).forEach(([r,h])=>{s[`member.${n}.${r}`]=h}),n++}return s},Ee=(e,t)=>{const s={};return e[Re]!=null&&(s[Re]=(0,i.lK)(e[Re])),e[K]!=null&&(s[K]=(0,i.lK)(e[K])),s},_t=(e,t)=>{const s={};return e[y]!=null&&(s[y]=j(e[y],t)),e[k]!=null&&(s[k]=Ee(e[k],t)),e[b]!=null&&(s[b]=(0,i.xW)(e[b])),e[I]!=null&&(s[I]=(0,i.lK)(e[I])),s},bt=(e,t)=>{const s={};return e[y]!=null&&(s[y]=j(e[y],t)),e[k]!=null&&(s[k]=Ee(e[k],t)),e[b]!=null&&(s[b]=__strictParseInt32(e[b])),e[ze]!=null&&(s[ze]=__expectString(e[ze])),e[Oe]!=null&&(s[Oe]=__expectString(e[Oe])),e[xe]!=null&&(s[xe]=__expectString(e[xe])),e[V]!=null&&(s[V]=__expectString(e[V])),e[De]!=null&&(s[De]=__expectString(e[De])),e[I]!=null&&(s[I]=__expectString(e[I])),s},xt=(e,t)=>{const s={};return e[y]!=null&&(s[y]=j(e[y],t)),e[Ge]!=null&&(s[Ge]=(0,i.lK)(e[Ge])),e[k]!=null&&(s[k]=Ee(e[k],t)),e[b]!=null&&(s[b]=(0,i.xW)(e[b])),e[Ke]!=null&&(s[Ke]=(0,i.lK)(e[Ke])),e[V]!=null&&(s[V]=(0,i.lK)(e[V])),e[I]!=null&&(s[I]=(0,i.lK)(e[I])),s},Tt=(e,t)=>{const s={};return e[y]!=null&&(s[y]=j(e[y],t)),e[I]!=null&&(s[I]=__expectString(e[I])),s},j=(e,t)=>{const s={};return e[N]!=null&&(s[N]=(0,i.lK)(e[N])),e[Fe]!=null&&(s[Fe]=(0,i.lK)(e[Fe])),e[Ue]!=null&&(s[Ue]=(0,i.lK)(e[Ue])),e[Pe]!=null&&(s[Pe]=(0,i.Y0)((0,i.t_)(e[Pe]))),s},wt=(e,t)=>{const s={};return e[Ie]!=null&&(s[Ie]=__expectString(e[Ie])),s},Dt=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},$t=(e,t)=>{const s={};return e[be]!=null&&(s[be]=__expectString(e[be])),e[K]!=null&&(s[K]=__expectString(e[K])),s},Wt=(e,t)=>{const s={};return e[B]!=null&&(s[B]=__expectString(e[B])),s},Mt=(e,t)=>{const s={};return e[Ne]!=null&&(s[Ne]=__expectString(e[Ne])),e[B]!=null&&(s[B]=__expectString(e[B])),e[K]!=null&&(s[K]=__expectString(e[K])),s},kt=(e,t)=>{const s={};return e[y]!=null&&(s[y]=j(e[y],t)),e[_e]!=null&&(s[_e]=$t(e[_e],t)),e[b]!=null&&(s[b]=__strictParseInt32(e[b])),s},Kt=(e,t)=>{const s={};return e[y]!=null&&(s[y]=j(e[y],t)),s},zt=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},Ft=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},Lt=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},Gt=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},Ot=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},Ut=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},Ht=(e,t)=>{const s={};return e[u]!=null&&(s[u]=(0,i.lK)(e[u])),s},A=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Yn=(e,t)=>collectBody(e,t).then(s=>t.utf8Encoder(s)),jt=(0,i.jr)(x),D=async(e,t,s,n,o)=>{const{hostname:a,protocol:r="https",port:h,path:C}=await e.endpoint(),p={protocol:r,hostname:a,port:h,method:"POST",path:C.endsWith("/")?C.slice(0,-1)+s:C+s,headers:t};return n!==void 0&&(p.hostname=n),o!==void 0&&(p.body=o),new Se.Kd(p)},$={"content-type":"application/x-www-form-urlencoded"},W="2011-06-15",M="Action",N="AccessKeyId",Nt="AssumeRole",Re="AssumedRoleId",k="AssumedRoleUser",Bt="AssumeRoleWithSAML",Vt="AssumeRoleWithWebIdentity",Zt="AssumeRoot",B="Account",K="Arn",V="Audience",y="Credentials",Ce="ContextAssertion",Xt="DecodeAuthorizationMessage",Ie="DecodedMessage",g="DurationSeconds",Pe="Expiration",pe="ExternalId",ve="EncodedMessage",_e="FederatedUser",be="FederatedUserId",Qt="GetAccessKeyInfo",Jt="GetCallerIdentity",Yt="GetFederationToken",qt="GetSessionToken",xe="Issuer",Te="Key",we="Name",De="NameQualifier",v="Policy",_="PolicyArns",$e="PrincipalArn",We="ProviderArn",Me="ProvidedContexts",ke="ProviderId",b="PackedPolicySize",Ke="Provider",z="RoleArn",Z="RoleSessionName",ze="Subject",Fe="SecretAccessKey",Le="SAMLAssertion",Ge="SubjectFromWebIdentityToken",I="SourceIdentity",X="SerialNumber",Oe="SubjectType",Ue="SessionToken",Q="Tags",J="TokenCode",He="TargetPrincipal",rs="TaskPolicyArn",je="TransitiveTagKeys",Ne="UserId",F="Version",Be="Value",Ve="WebIdentityToken",Ze="arn",u="message",L=e=>Object.entries(e).map(([t,s])=>(0,i.$6)(t)+"="+(0,i.$6)(s)).join("&"),en=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"};class sn extends i.uB.classBuilder().ep(ts).m(function(t,s,n,o){return[(0,ss.TM)(n,this.serialize,this.deserialize),(0,ae.rD)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Xs).ser(st).de(nt).build(){}class tn extends i.uB.classBuilder().ep(ts).m(function(t,s,n,o){return[(0,ss.TM)(n,this.serialize,this.deserialize),(0,ae.rD)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Qs,Js).ser(tt).de(ot).build(){}const is="us-east-1",cs=e=>{if(typeof e?.Arn=="string"){const t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},as=async(e,t,s)=>{const n=typeof e=="function"?await e():e,o=typeof t=="function"?await t():t;return s?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (provider)`,`${o} (parent client)`,`${is} (STS default)`),n??o??is},ds=(e,t)=>{let s,n;return async(o,a)=>{if(n=o,!s){const{logger:U=e?.parentClientConfig?.logger,region:te,requestHandler:ie=e?.parentClientConfig?.requestHandler,credentialProviderLogger:es}=e,Tn=await as(te,e?.parentClientConfig?.region,es),wn=!ms(ie);s=new t({credentialDefaultProvider:()=>async()=>n,region:Tn,requestHandler:wn?ie:void 0,logger:U})}const{Credentials:r,AssumedRoleUser:h}=await s.send(new sn(a));if(!r||!r.AccessKeyId||!r.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${a.RoleArn}`);const C=cs(h),p={accessKeyId:r.AccessKeyId,secretAccessKey:r.SecretAccessKey,sessionToken:r.SessionToken,expiration:r.Expiration,...r.CredentialScope&&{credentialScope:r.CredentialScope},...C&&{accountId:C}};return(0,ce.g)(p,"CREDENTIALS_STS_ASSUME_ROLE","i"),p}},ls=(e,t)=>{let s;return async n=>{if(!s){const{logger:C=e?.parentClientConfig?.logger,region:p,requestHandler:U=e?.parentClientConfig?.requestHandler,credentialProviderLogger:te}=e,ie=await as(p,e?.parentClientConfig?.region,te),es=!ms(U);s=new t({region:ie,requestHandler:es?U:void 0,logger:C})}const{Credentials:o,AssumedRoleUser:a}=await s.send(new tn(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);const r=cs(a),h={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...r&&{accountId:r}};return r&&(0,ce.g)(h,"RESOLVED_ACCOUNT_ID","T"),(0,ce.g)(h,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),h}},qn=e=>t=>e({roleAssumer:ds(t,t.stsClientCtor),roleAssumerWithWebIdentity:ls(t,t.stsClientCtor),...t}),ms=e=>e?.metadata?.handlerProtocol==="h2";var us=d(8104),nn=d(39388),on=d(1254),fs=d(85186),ee=d(57801),se=d(25158),rn=d(51320),oe=d(25263),cn=d(38386),hs=d(42952);const an=async(e,t,s)=>({operation:(0,hs.u)(t).operation,region:await(0,hs.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function dn(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,s)=>({signingProperties:{config:t,context:s}})}}function ys(e){return{schemeId:"smithy.api#noAuth"}}const ln=e=>{const t=[];switch(e.operation){case"AssumeRoleWithSAML":{t.push(ys(e));break}case"AssumeRoleWithWebIdentity":{t.push(ys(e));break}default:t.push(dn(e))}return t},mn=e=>({...e,stsClientCtor:qe}),un=e=>{const t=mn(e);return{...(0,cn.h)(t)}},fn={rE:"3.693.0"};var hn=d(34269),gs=d(44627),As=d(62744),Ss=d(86502),yn=d(51461),Y=d(75854),Es=d(32117),gn=d(88226),An=d(94134),Sn=d(42640),Rs=d(61821),Cs=d(91276),En=d(22725),Xe=d(5332);const Is="required",c="type",l="fn",m="argv",G="ref",Ps=!1,Qe=!0,O="booleanEquals",S="stringEquals",ps="sigv4",vs="sts",_s="us-east-1",f="endpoint",bs="https://sts.{Region}.{PartitionResult#dnsSuffix}",T="tree",q="error",Je="getAttr",xs={[Is]:!1,[c]:"String"},Ye={[Is]:!0,default:!1,[c]:"Boolean"},Ts={[G]:"Endpoint"},ws={[l]:"isSet",[m]:[{[G]:"Region"}]},E={[G]:"Region"},Ds={[l]:"aws.partition",[m]:[E],assign:"PartitionResult"},$s={[G]:"UseFIPS"},Ws={[G]:"UseDualStack"},R={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:ps,signingName:vs,signingRegion:_s}]},headers:{}},P={},Ms={conditions:[{[l]:S,[m]:[E,"aws-global"]}],[f]:R,[c]:f},ks={[l]:O,[m]:[$s,!0]},Ks={[l]:O,[m]:[Ws,!0]},zs={[l]:Je,[m]:[{[G]:"PartitionResult"},"supportsFIPS"]},Fs={[G]:"PartitionResult"},Ls={[l]:O,[m]:[!0,{[l]:Je,[m]:[Fs,"supportsDualStack"]}]},Gs=[{[l]:"isSet",[m]:[Ts]}],Os=[ks],Us=[Ks],Rn={version:"1.0",parameters:{Region:xs,UseDualStack:Ye,UseFIPS:Ye,Endpoint:xs,UseGlobalEndpoint:Ye},rules:[{conditions:[{[l]:O,[m]:[{[G]:"UseGlobalEndpoint"},Qe]},{[l]:"not",[m]:Gs},ws,Ds,{[l]:O,[m]:[$s,Ps]},{[l]:O,[m]:[Ws,Ps]}],rules:[{conditions:[{[l]:S,[m]:[E,"ap-northeast-1"]}],endpoint:R,[c]:f},{conditions:[{[l]:S,[m]:[E,"ap-south-1"]}],endpoint:R,[c]:f},{conditions:[{[l]:S,[m]:[E,"ap-southeast-1"]}],endpoint:R,[c]:f},{conditions:[{[l]:S,[m]:[E,"ap-southeast-2"]}],endpoint:R,[c]:f},Ms,{conditions:[{[l]:S,[m]:[E,"ca-central-1"]}],endpoint:R,[c]:f},{conditions:[{[l]:S,[m]:[E,"eu-central-1"]}],endpoint:R,[c]:f},{conditions:[{[l]:S,[m]:[E,"eu-north-1"]}],endpoint:R,[c]:f},{conditions:[{[l]:S,[m]:[E,"eu-west-1"]}],endpoint:R,[c]:f},{conditions:[{[l]:S,[m]:[E,"eu-west-2"]}],endpoint:R,[c]:f},{conditions:[{[l]:S,[m]:[E,"eu-west-3"]}],endpoint:R,[c]:f},{conditions:[{[l]:S,[m]:[E,"sa-east-1"]}],endpoint:R,[c]:f},{conditions:[{[l]:S,[m]:[E,_s]}],endpoint:R,[c]:f},{conditions:[{[l]:S,[m]:[E,"us-east-2"]}],endpoint:R,[c]:f},{conditions:[{[l]:S,[m]:[E,"us-west-1"]}],endpoint:R,[c]:f},{conditions:[{[l]:S,[m]:[E,"us-west-2"]}],endpoint:R,[c]:f},{endpoint:{url:bs,properties:{authSchemes:[{name:ps,signingName:vs,signingRegion:"{Region}"}]},headers:P},[c]:f}],[c]:T},{conditions:Gs,rules:[{conditions:Os,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[c]:q},{conditions:Us,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[c]:q},{endpoint:{url:Ts,properties:P,headers:P},[c]:f}],[c]:T},{conditions:[ws],rules:[{conditions:[Ds],rules:[{conditions:[ks,Ks],rules:[{conditions:[{[l]:O,[m]:[Qe,zs]},Ls],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:P,headers:P},[c]:f}],[c]:T},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[c]:q}],[c]:T},{conditions:Os,rules:[{conditions:[{[l]:O,[m]:[zs,Qe]}],rules:[{conditions:[{[l]:S,[m]:[{[l]:Je,[m]:[Fs,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:P,headers:P},[c]:f},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:P,headers:P},[c]:f}],[c]:T},{error:"FIPS is enabled but this partition does not support FIPS",[c]:q}],[c]:T},{conditions:Us,rules:[{conditions:[Ls],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:P,headers:P},[c]:f}],[c]:T},{error:"DualStack is enabled but this partition does not support DualStack",[c]:q}],[c]:T},Ms,{endpoint:{url:bs,properties:P,headers:P},[c]:f}],[c]:T}],[c]:T},{error:"Invalid Configuration: Missing Region",[c]:q}]},Cn=new Xe.kS({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),In=(e,t={})=>Cn.get(e,()=>(0,Xe.sO)(Rn,{endpointParams:e,logger:t.logger}));Xe.mw.aws=En.UF;const Pn=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??Rs.E,base64Encoder:e?.base64Encoder??Rs.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??In,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??ln,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new gs.f2},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new se.mR}],logger:e?.logger??new i.N4,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??Sn.D,utf8Decoder:e?.utf8Decoder??Cs.ar,utf8Encoder:e?.utf8Encoder??Cs.Pq});var pn=d(12165);const vn=e=>{(0,i.I9)(process.version);const t=(0,pn.I)(e),s=()=>t().then(i.lT),n=Pn(e);return(0,hn.I)(process.version),{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??gn.n,credentialDefaultProvider:e?.credentialDefaultProvider??As.v6,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Ss.pf)({serviceId:n.serviceId,clientVersion:fn.rE}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4")||(async a=>await(0,As.v6)(a?.__config||{})()),signer:new gs.f2},{schemeId:"smithy.api#noAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new se.mR}],maxAttempts:e?.maxAttempts??(0,Y.Z)(oe.qs),region:e?.region??(0,Y.Z)(ee.GG,ee.zH),requestHandler:Es.$c.create(e?.requestHandler??s),retryMode:e?.retryMode??(0,Y.Z)({...oe.kN,default:async()=>(await s()).retryMode||An.L0}),sha256:e?.sha256??yn.V.bind(null,"sha256"),streamCollector:e?.streamCollector??Es.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Y.Z)(ee.e$),useFipsEndpoint:e?.useFipsEndpoint??(0,Y.Z)(ee.Ko),userAgentAppId:e?.userAgentAppId??(0,Y.Z)(Ss.hV)}};var Hs=d(8889);const _n=e=>{const t=e.httpAuthSchemes;let s=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){const a=t.findIndex(r=>r.schemeId===o.schemeId);a===-1?t.push(o):t.splice(a,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){s=o},httpAuthSchemeProvider(){return s},setCredentials(o){n=o},credentials(){return n}}},bn=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),re=e=>e,xn=(e,t)=>{const s={...re((0,Hs.Rq)(e)),...re((0,i.xA)(e)),...re((0,Se.eS)(e)),...re(_n(e))};return t.forEach(n=>n.configure(s)),{...e,...(0,Hs.$3)(s),...(0,i.uv)(s),...(0,Se.jt)(s),...bn(s)}};class qe extends i.Kj{constructor(...[t]){const s=vn(t||{}),n=Zs(s),o=(0,fs.Dc)(n),a=(0,oe.$z)(o),r=(0,ee.TD)(a),h=(0,us.OV)(r),C=(0,ae.Co)(h),p=un(C),U=xn(p,t?.extensions||[]);super(U),this.config=U,this.middlewareStack.use((0,fs.sM)(this.config)),this.middlewareStack.use((0,oe.ey)(this.config)),this.middlewareStack.use((0,rn.vK)(this.config)),this.middlewareStack.use((0,us.TC)(this.config)),this.middlewareStack.use((0,nn.Y7)(this.config)),this.middlewareStack.use((0,on.n4)(this.config)),this.middlewareStack.use((0,se.wB)(this.config,{httpAuthSchemeParametersProvider:an,identityProviderConfigProvider:async te=>new se.h$({"aws.auth#sigv4":te.credentials})})),this.middlewareStack.use((0,se.lW)(this.config))}destroy(){super.destroy()}}const js=(e,t)=>t?class extends e{constructor(n){super(n);for(const o of t)this.middlewareStack.use(o)}}:e,Ns=(e={},t)=>ds(e,js(qe,t)),Bs=(e={},t)=>ls(e,js(qe,t)),so=e=>t=>e({roleAssumer:Ns(t),roleAssumerWithWebIdentity:Bs(t),...t})}};
