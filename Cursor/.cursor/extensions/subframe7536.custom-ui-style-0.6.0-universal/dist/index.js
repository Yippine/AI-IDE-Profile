'use strict';var vscode=require('vscode'),p=require('fs'),br=require('os'),D=require('path/posix'),xo=require('url'),he=require('path'),util=require('util'),xe=require('process'),child_process=require('child_process'),crypto=require('crypto');function _interopDefault(e){return e&&e.__esModule?e:{default:e}}var p__default=/*#__PURE__*/_interopDefault(p);var br__default=/*#__PURE__*/_interopDefault(br);var D__default=/*#__PURE__*/_interopDefault(D);var xo__default=/*#__PURE__*/_interopDefault(xo);var he__default=/*#__PURE__*/_interopDefault(he);var xe__default=/*#__PURE__*/_interopDefault(xe);var In=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});function ys(e){let t=Object.create(null);for(let n of e.split(","))t[n]=1;return n=>n in t}process.env.NODE_ENV!=="production"?Object.freeze({}):{};process.env.NODE_ENV!=="production"&&Object.freeze([]);var qe=Object.assign,ws=Object.prototype.hasOwnProperty,Tt=(e,t)=>ws.call(e,t),Q=Array.isArray,we=e=>et(e)==="[object Map]",X=e=>typeof e=="function",Ss=e=>typeof e=="string",Me=e=>typeof e=="symbol",be=e=>e!==null&&typeof e=="object",xs=Object.prototype.toString,et=e=>xs.call(e),Ln=e=>et(e).slice(8,-1),Ht=e=>Ss(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Cs=e=>{let t=Object.create(null);return n=>t[n]||(t[n]=e(n))},ks=Cs(e=>e.charAt(0).toUpperCase()+e.slice(1)),oe=(e,t)=>!Object.is(e,t);function B(e,...t){console.warn(`[Vue warn] ${e}`,...t);}var T,Rt=class{constructor(t=false){this.detached=t,this._active=true,this.effects=[],this.cleanups=[],this._isPaused=false,this.parent=T,!t&&T&&(this.index=(T.scopes||(T.scopes=[])).push(this)-1);}get active(){return this._active}pause(){if(this._active){this._isPaused=true;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause();}}resume(){if(this._active&&this._isPaused){this._isPaused=false;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume();}}run(t){if(this._active){let n=T;try{return T=this,t()}finally{T=n;}}else process.env.NODE_ENV!=="production"&&B("cannot run an inactive effect scope.");}on(){T=this;}off(){T=this.parent;}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(true);if(!this.detached&&this.parent&&!t){let s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index);}this.parent=void 0,this._active=false;}}};function Fn(e){return new Rt(e)}function tt(){return T}var m;var Vn=0,De,Ne;function Un(e,t=false){if(e.flags|=8,t){e.next=Ne,Ne=e;return}e.next=De,De=e;}function Bt(){Vn++;}function Kt(){if(--Vn>0)return;if(Ne){let t=Ne;for(Ne=void 0;t;){let n=t.next;t.next=void 0,t.flags&=-9,t=n;}}let e;for(;De;){let t=De;for(De=void 0;t;){let n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger();}catch(r){e||(e=r);}t=n;}}if(e)throw e}function jn(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t;}function Hn(e){let t,n=e.depsTail,r=n;for(;r;){let s=r.prevDep;r.version===-1?(r===n&&(n=s),Gt(r),Ts(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s;}e.deps=t,e.depsTail=n;}function Nt(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Bn(t.dep.computed)||t.dep.version!==t.version))return  true;return !!e._dirty}function Bn(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ie))return;e.globalVersion=Ie;let t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Nt(e)){e.flags&=-3;return}let n=m,r=U;m=e,U=true;try{jn(e);let s=e.fn(e._value);(t.version===0||oe(s,e._value))&&(e._value=s,t.version++);}catch(s){throw t.version++,s}finally{m=n,U=r,Hn(e),e.flags&=-3;}}function Gt(e,t=false){let{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),process.env.NODE_ENV!=="production"&&n.subsHead===e&&(n.subsHead=s),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)Gt(o,true);}!t&&!--n.sc&&n.map&&n.map.delete(n.key);}function Ts(e){let{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0);}var U=true,Kn=[];function Jt(){Kn.push(U),U=false;}function zt(){let e=Kn.pop();U=e===void 0?true:e;}var Ie=0,It=class{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0;}},Pe=class{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,process.env.NODE_ENV!=="production"&&(this.subsHead=void 0);}track(t){if(!m||!U||m===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==m)n=this.activeLink=new It(m,this),m.deps?(n.prevDep=m.depsTail,m.depsTail.nextDep=n,m.depsTail=n):m.deps=m.depsTail=n,Gn(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){let r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=m.depsTail,n.nextDep=void 0,m.depsTail.nextDep=n,m.depsTail=n,m.deps===n&&(m.deps=r);}return process.env.NODE_ENV!=="production"&&m.onTrack&&m.onTrack(qe({effect:m},t)),n}trigger(t){this.version++,Ie++,this.notify(t);}notify(t){Bt();try{if(process.env.NODE_ENV!=="production")for(let n=this.subsHead;n;n=n.nextSub)n.sub.onTrigger&&!(n.sub.flags&8)&&n.sub.onTrigger(qe({effect:n.sub},t));for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify();}finally{Kt();}}};function Gn(e){if(e.dep.sc++,e.sub.flags&4){let t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Gn(r);}let n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),process.env.NODE_ENV!=="production"&&e.dep.subsHead===void 0&&(e.dep.subsHead=e),e.dep.subs=e;}}var Pt=new WeakMap,fe=Symbol(process.env.NODE_ENV!=="production"?"Object iterate":""),Ot=Symbol(process.env.NODE_ENV!=="production"?"Map keys iterate":""),Oe=Symbol(process.env.NODE_ENV!=="production"?"Array iterate":"");function I(e,t,n){if(U&&m){let r=Pt.get(e);r||Pt.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new Pe),s.map=r,s.key=n),process.env.NODE_ENV!=="production"?s.track({target:e,type:t,key:n}):s.track();}}function re(e,t,n,r,s,o){let i=Pt.get(e);if(!i){Ie++;return}let a=c=>{c&&(process.env.NODE_ENV!=="production"?c.trigger({target:e,type:t,key:n,newValue:r,oldValue:s,oldTarget:o}):c.trigger());};if(Bt(),t==="clear")i.forEach(a);else {let c=Q(e),l=c&&Ht(n);if(c&&n==="length"){let f=Number(r);i.forEach((u,y)=>{(y==="length"||y===Oe||!Me(y)&&y>=f)&&a(u);});}else switch((n!==void 0||i.has(void 0))&&a(i.get(n)),l&&a(i.get(Oe)),t){case "add":c?l&&a(i.get("length")):(a(i.get(fe)),we(e)&&a(i.get(Ot)));break;case "delete":c||(a(i.get(fe)),we(e)&&a(i.get(Ot)));break;case "set":we(e)&&a(i.get(fe));break}}Kt();}function ye(e){let t=g(e);return t===e?t:(I(t,"iterate",Oe),j(e)?t:t.map(R))}function Yt(e){return I(e=g(e),"iterate",Oe),e}var Rs={__proto__:null,[Symbol.iterator](){return Ct(this,Symbol.iterator,R)},concat(...e){return ye(this).concat(...e.map(t=>Q(t)?ye(t):t))},entries(){return Ct(this,"entries",e=>(e[1]=R(e[1]),e))},every(e,t){return Y(this,"every",e,t,void 0,arguments)},filter(e,t){return Y(this,"filter",e,t,n=>n.map(R),arguments)},find(e,t){return Y(this,"find",e,t,R,arguments)},findIndex(e,t){return Y(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Y(this,"findLast",e,t,R,arguments)},findLastIndex(e,t){return Y(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Y(this,"forEach",e,t,void 0,arguments)},includes(...e){return kt(this,"includes",e)},indexOf(...e){return kt(this,"indexOf",e)},join(e){return ye(this).join(e)},lastIndexOf(...e){return kt(this,"lastIndexOf",e)},map(e,t){return Y(this,"map",e,t,void 0,arguments)},pop(){return Te(this,"pop")},push(...e){return Te(this,"push",e)},reduce(e,...t){return On(this,"reduce",e,t)},reduceRight(e,...t){return On(this,"reduceRight",e,t)},shift(){return Te(this,"shift")},some(e,t){return Y(this,"some",e,t,void 0,arguments)},splice(...e){return Te(this,"splice",e)},toReversed(){return ye(this).toReversed()},toSorted(e){return ye(this).toSorted(e)},toSpliced(...e){return ye(this).toSpliced(...e)},unshift(...e){return Te(this,"unshift",e)},values(){return Ct(this,"values",R)}};function Ct(e,t,n){let r=Yt(e),s=r[t]();return r!==e&&!j(e)&&(s._next=s.next,s.next=()=>{let o=s._next();return o.value&&(o.value=n(o.value)),o}),s}var Ds=Array.prototype;function Y(e,t,n,r,s,o){let i=Yt(e),a=i!==e&&!j(e),c=i[t];if(c!==Ds[t]){let u=c.apply(e,o);return a?R(u):u}let l=n;i!==e&&(a?l=function(u,y){return n.call(this,R(u),y,e)}:n.length>2&&(l=function(u,y){return n.call(this,u,y,e)}));let f=c.call(i,l,r);return a&&s?s(f):f}function On(e,t,n,r){let s=Yt(e),o=n;return s!==e&&(j(e)?n.length>3&&(o=function(i,a,c){return n.call(this,i,a,c,e)}):o=function(i,a,c){return n.call(this,i,R(a),c,e)}),s[t](o,...r)}function kt(e,t,n){let r=g(e);I(r,"iterate",Oe);let s=r[t](...n);return (s===-1||s===false)&&js(n[0])?(n[0]=g(n[0]),r[t](...n)):s}function Te(e,t,n=[]){Jt(),Bt();let r=g(e)[t].apply(e,n);return Kt(),zt(),r}var Ns=ys("__proto__,__v_isRef,__isVue"),Jn=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Me));function Is(e){Me(e)||(e=String(e));let t=g(this);return I(t,"has",e),t.hasOwnProperty(e)}var Qe=class{constructor(t=false,n=false){this._isReadonly=t,this._isShallow=n;}get(t,n,r){let s=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return !s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return o;if(n==="__v_raw")return r===(s?o?Ws:qn:o?Fs:Yn).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;let i=Q(t);if(!s){let c;if(i&&(c=Rs[n]))return c;if(n==="hasOwnProperty")return Is}let a=Reflect.get(t,n,H(t)?t:r);return (Me(n)?Jn.has(n):Ns(n))||(s||I(t,"get",n),o)?a:H(a)?i&&Ht(n)?a:a.value:be(a)?s?Qn(a):nt(a):a}},At=class extends Qe{constructor(t=false){super(false,t);}set(t,n,r,s){let o=t[n];if(!this._isShallow){let c=de(o);if(!j(r)&&!de(r)&&(o=g(o),r=g(r)),!Q(t)&&H(o)&&!H(r))return c?false:(o.value=r,true)}let i=Q(t)&&Ht(n)?Number(n)<t.length:Tt(t,n),a=Reflect.set(t,n,r,H(t)?t:s);return t===g(s)&&(i?oe(r,o)&&re(t,"set",n,r,o):re(t,"add",n,r)),a}deleteProperty(t,n){let r=Tt(t,n),s=t[n],o=Reflect.deleteProperty(t,n);return o&&r&&re(t,"delete",n,void 0,s),o}has(t,n){let r=Reflect.has(t,n);return (!Me(n)||!Jn.has(n))&&I(t,"has",n),r}ownKeys(t){return I(t,"iterate",Q(t)?"length":fe),Reflect.ownKeys(t)}},Mt=class extends Qe{constructor(t=false){super(true,t);}set(t,n){return process.env.NODE_ENV!=="production"&&B(`Set operation on key "${String(n)}" failed: target is readonly.`,t),true}deleteProperty(t,n){return process.env.NODE_ENV!=="production"&&B(`Delete operation on key "${String(n)}" failed: target is readonly.`,t),true}},Ps=new At,Os=new Mt;var Ke=e=>Reflect.getPrototypeOf(e);function As(e,t,n){return function(...r){let s=this.__v_raw,o=g(s),i=we(o),a=e==="entries"||e===Symbol.iterator&&i,c=e==="keys"&&i,l=s[e](...r),f=t?Lt:R;return !t&&I(o,"iterate",c?Ot:fe),{next(){let{value:u,done:y}=l.next();return y?{value:u,done:y}:{value:a?[f(u[0]),f(u[1])]:f(u),done:y}},[Symbol.iterator](){return this}}}}function Ge(e){return function(...t){if(process.env.NODE_ENV!=="production"){let n=t[0]?`on key "${t[0]}" `:"";B(`${ks(e)} operation ${n}failed: target is readonly.`,g(this));}return e==="delete"?false:e==="clear"?void 0:this}}function Ms(e,t){let n={get(s){let o=this.__v_raw,i=g(o),a=g(s);e||(oe(s,a)&&I(i,"get",s),I(i,"get",a));let{has:c}=Ke(i),l=e?Lt:R;if(c.call(i,s))return l(o.get(s));if(c.call(i,a))return l(o.get(a));o!==i&&o.get(s);},get size(){let s=this.__v_raw;return !e&&I(g(s),"iterate",fe),Reflect.get(s,"size",s)},has(s){let o=this.__v_raw,i=g(o),a=g(s);return e||(oe(s,a)&&I(i,"has",s),I(i,"has",a)),s===a?o.has(s):o.has(s)||o.has(a)},forEach(s,o){let i=this,a=i.__v_raw,c=g(a),l=e?Lt:R;return !e&&I(c,"iterate",fe),a.forEach((f,u)=>s.call(o,l(f),l(u),i))}};return qe(n,e?{add:Ge("add"),set:Ge("set"),delete:Ge("delete"),clear:Ge("clear")}:{add(s){!j(s)&&!de(s)&&(s=g(s));let o=g(this);return Ke(o).has.call(o,s)||(o.add(s),re(o,"add",s,s)),this},set(s,o){!j(o)&&!de(o)&&(o=g(o));let i=g(this),{has:a,get:c}=Ke(i),l=a.call(i,s);l?process.env.NODE_ENV!=="production"&&An(i,a,s):(s=g(s),l=a.call(i,s));let f=c.call(i,s);return i.set(s,o),l?oe(o,f)&&re(i,"set",s,o,f):re(i,"add",s,o),this},delete(s){let o=g(this),{has:i,get:a}=Ke(o),c=i.call(o,s);c?process.env.NODE_ENV!=="production"&&An(o,i,s):(s=g(s),c=i.call(o,s));let l=a?a.call(o,s):void 0,f=o.delete(s);return c&&re(o,"delete",s,void 0,l),f},clear(){let s=g(this),o=s.size!==0,i=process.env.NODE_ENV!=="production"?we(s)?new Map(s):new Set(s):void 0,a=s.clear();return o&&re(s,"clear",void 0,void 0,i),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=As(s,e);}),n}function zn(e,t){let n=Ms(e);return (r,s,o)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(Tt(n,s)&&s in r?n:r,s,o)}var $s={get:zn(false)};var Ls={get:zn(true)};function An(e,t,n){let r=g(n);if(r!==n&&t.call(e,r)){let s=Ln(e);B(`Reactive ${s} contains both the raw and reactive versions of the same object${s==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`);}}var Yn=new WeakMap,Fs=new WeakMap,qn=new WeakMap,Ws=new WeakMap;function Vs(e){switch(e){case "Object":case "Array":return 1;case "Map":case "Set":case "WeakMap":case "WeakSet":return 2;default:return 0}}function Us(e){return e.__v_skip||!Object.isExtensible(e)?0:Vs(Ln(e))}function nt(e){return de(e)?e:Xn(e,false,Ps,$s,Yn)}function Qn(e){return Xn(e,true,Os,Ls,qn)}function Xn(e,t,n,r,s){if(!be(e))return process.env.NODE_ENV!=="production"&&B(`value cannot be made ${t?"readonly":"reactive"}: ${String(e)}`),e;if(e.__v_raw&&!(t&&e.__v_isReactive))return e;let o=s.get(e);if(o)return o;let i=Us(e);if(i===0)return e;let a=new Proxy(e,i===2?r:n);return s.set(e,a),a}function de(e){return !!(e&&e.__v_isReadonly)}function j(e){return !!(e&&e.__v_isShallow)}function js(e){return e?!!e.__v_raw:false}function g(e){let t=e&&e.__v_raw;return t?g(t):e}var R=e=>be(e)?nt(e):e,Lt=e=>be(e)?Qn(e):e;function H(e){return e?e.__v_isRef===true:false}function S(e){return er(e,true)}function er(e,t){return H(e)?e:new Ft(e,t)}var Ft=class{constructor(t,n){this.dep=new Pe,this.__v_isRef=true,this.__v_isShallow=false,this._rawValue=n?t:g(t),this._value=n?t:R(t),this.__v_isShallow=n;}get value(){return process.env.NODE_ENV!=="production"?this.dep.track({target:this,type:"get",key:"value"}):this.dep.track(),this._value}set value(t){let n=this._rawValue,r=this.__v_isShallow||j(t)||de(t);t=r?t:g(t),oe(t,n)&&(this._rawValue=t,this._value=r?t:R(t),process.env.NODE_ENV!=="production"?this.dep.trigger({target:this,type:"set",key:"value",newValue:t,oldValue:n}):this.dep.trigger());}};var Wt=class{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Pe(this),this.__v_isRef=true,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ie-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r;}notify(){if(this.flags|=16,!(this.flags&8)&&m!==this)return Un(this,true),true;process.env.NODE_ENV;}get value(){let t=process.env.NODE_ENV!=="production"?this.dep.track({target:this,type:"get",key:"value"}):this.dep.track();return Bn(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter?this.setter(t):process.env.NODE_ENV!=="production"&&B("Write operation failed: computed value is readonly");}};function F(e,t,n=false){let r,s;X(e)?r=e:(r=e.get,s=e.set);let o=new Wt(r,s,n);return process.env.NODE_ENV!=="production"&&t,o}var Vt=(e=>(e.ACTIVATED="a",e.DEACTIVATED="da",e))(Vt||{}),qt=(e=>(e[e.WATCH_GETTER=0]="WATCH_GETTER",e[e.WATCH_CALLBACK=1]="WATCH_CALLBACK",e[e.WATCH_CLEANUP=2]="WATCH_CLEANUP",e[e.APP_ERROR_HANDLER=3]="APP_ERROR_HANDLER",e[e.SCHEDULER=4]="SCHEDULER",e))(qt||{});({[Vt.ACTIVATED]:"activated hook",[Vt.DEACTIVATED]:"deactivated hook"});var Ut=(e=>(e[e.QUEUED=1]="QUEUED",e[e.PRE=2]="PRE",e[e.ALLOW_RECURSE=4]="ALLOW_RECURSE",e[e.DISPOSED=8]="DISPOSED",e))(Ut||{});Promise.resolve();var ro=[];var en=S(null),tn=Fn();function lr(e){return {activate:t=>(en.value=t,tn.run(()=>(fr.map(n=>n(t)),e()))),deactivate:()=>{ro.map(t=>t()),tn.stop();}}}var fr=[];function so(e){en.value?e(en.value):fr.push(e);}function oo(e,t,n){let s=vscode.workspace.getConfiguration(e,n);function o(a,c){let l=S(c),f=F({get:()=>l.value,set:u=>{l.value=u,s.update(a,u);}});return f.update=async(u,y,ae)=>{await s.update(a,u,y,ae),f.value=u;},f.set=u=>{l.value=u;},f}let i=Object.fromEntries(Object.keys(t).map(a=>[a,o(a,s.get(a))]));return so(()=>{v(vscode.workspace.onDidChangeConfiguration(a=>{if(!a.affectsConfiguration(e))return;let c=vscode.workspace.getConfiguration(e);for(let l in t)a.affectsConfiguration(`${e}.${l}`)&&i[l].set(c.get(l));}));}),i}function dr(e,t,n){let r=oo(e,t,n);return nt({...r,$update(s,o,i,a){return r[s].update(o,i,a)},$set(s,o){return r[s].set(o)}})}function v(e){return (tt()??tn).cleanups.push(e.dispose.bind(e)),e}function nn(e,t){v(vscode.commands.registerCommand(e,t));}var W="custom-ui-style";var mr="Custom UI Style";var rn={reload:"custom-ui-style.reload",rollback:"custom-ui-style.rollback"};var sn={scope:"custom-ui-style",defaults:{preferRestart:false,reloadWithoutPrompting:false,watch:true,electron:{},"font.monospace":void 0,"font.sansSerif":void 0,"background.url":void 0,"background.syncURL":void 0,"background.opacity":.9,"background.size":"cover","background.position":"center","external.loadStrategy":"refetch","external.imports":void 0,stylesheet:{},"extensions.enable":true,"extensions.config":{},"webview.enable":true,"webview.removeCSP":true,"webview.monospaceSelector":void 0,"webview.sansSerifSelector":void 0,"webview.stylesheet":{}}};var d=dr(sn.scope,sn.defaults),ot="editor.fontFamily";function Ee(){return {monospace:d["font.monospace"]||vscode.workspace.getConfiguration().inspect(ot).globalValue,sansSerif:d["font.sansSerif"]}}var Z=(e,t)=>function(...r){return e.apply(void 0,r).catch(t)},J=(e,t)=>function(...r){try{return e.apply(void 0,r)}catch(s){return t(s)}};var yr=xe__default.default.getuid?!xe__default.default.getuid():false,vr=1e4,P=()=>{};var Le={isChangeErrorOk:e=>{if(!Le.isNodeError(e))return  false;let{code:t}=e;return t==="ENOSYS"||!yr&&(t==="EINVAL"||t==="EPERM")},isNodeError:e=>e instanceof Error,isRetriableError:e=>{if(!Le.isNodeError(e))return  false;let{code:t}=e;return t==="EMFILE"||t==="ENFILE"||t==="EAGAIN"||t==="EBUSY"||t==="EACCESS"||t==="EACCES"||t==="EACCS"||t==="EPERM"},onChangeError:e=>{if(!Le.isNodeError(e))throw e;if(!Le.isChangeErrorOk(e))throw e}},b=Le;var on=class{constructor(){this.interval=25,this.intervalId=void 0,this.limit=vr,this.queueActive=new Set,this.queueWaiting=new Set,this.init=()=>{this.intervalId||(this.intervalId=setInterval(this.tick,this.interval));},this.reset=()=>{this.intervalId&&(clearInterval(this.intervalId),delete this.intervalId);},this.add=t=>{this.queueWaiting.add(t),this.queueActive.size<this.limit/2?this.tick():this.init();},this.remove=t=>{this.queueWaiting.delete(t),this.queueActive.delete(t);},this.schedule=()=>new Promise(t=>{let n=()=>this.remove(r),r=()=>t(n);this.add(r);}),this.tick=()=>{if(!(this.queueActive.size>=this.limit)){if(!this.queueWaiting.size)return this.reset();for(let t of this.queueWaiting){if(this.queueActive.size>=this.limit)break;this.queueWaiting.delete(t),this.queueActive.add(t),t();}}};}},wr=new on;var ee=(e,t)=>function(r){return function s(...o){return wr.schedule().then(i=>{let a=l=>(i(),l),c=l=>{if(i(),Date.now()>=r)throw l;if(t(l)){let f=Math.round(100*Math.random());return new Promise(y=>setTimeout(y,f)).then(()=>s.apply(void 0,o))}throw l};return e.apply(void 0,o).then(a,c)})}},te=(e,t)=>function(r){return function s(...o){try{return e.apply(void 0,o)}catch(i){if(Date.now()>r)throw i;if(t(i))return s.apply(void 0,o);throw i}}};var fo={attempt:{chmod:Z(util.promisify(p__default.default.chmod),b.onChangeError),chown:Z(util.promisify(p__default.default.chown),b.onChangeError),close:Z(util.promisify(p__default.default.close),P),fsync:Z(util.promisify(p__default.default.fsync),P),mkdir:Z(util.promisify(p__default.default.mkdir),P),realpath:Z(util.promisify(p__default.default.realpath),P),stat:Z(util.promisify(p__default.default.stat),P),unlink:Z(util.promisify(p__default.default.unlink),P),chmodSync:J(p__default.default.chmodSync,b.onChangeError),chownSync:J(p__default.default.chownSync,b.onChangeError),closeSync:J(p__default.default.closeSync,P),existsSync:J(p__default.default.existsSync,P),fsyncSync:J(p__default.default.fsync,P),mkdirSync:J(p__default.default.mkdirSync,P),realpathSync:J(p__default.default.realpathSync,P),statSync:J(p__default.default.statSync,P),unlinkSync:J(p__default.default.unlinkSync,P)},retry:{close:ee(util.promisify(p__default.default.close),b.isRetriableError),fsync:ee(util.promisify(p__default.default.fsync),b.isRetriableError),open:ee(util.promisify(p__default.default.open),b.isRetriableError),readFile:ee(util.promisify(p__default.default.readFile),b.isRetriableError),rename:ee(util.promisify(p__default.default.rename),b.isRetriableError),stat:ee(util.promisify(p__default.default.stat),b.isRetriableError),write:ee(util.promisify(p__default.default.write),b.isRetriableError),writeFile:ee(util.promisify(p__default.default.writeFile),b.isRetriableError),closeSync:te(p__default.default.closeSync,b.isRetriableError),fsyncSync:te(p__default.default.fsyncSync,b.isRetriableError),openSync:te(p__default.default.openSync,b.isRetriableError),readFileSync:te(p__default.default.readFileSync,b.isRetriableError),renameSync:te(p__default.default.renameSync,b.isRetriableError),statSync:te(p__default.default.statSync,b.isRetriableError),writeSync:te(p__default.default.writeSync,b.isRetriableError),writeFileSync:te(p__default.default.writeFileSync,b.isRetriableError)}},x=fo;var Sr="utf8",cn=438,Er=511,xr={},_r={},Cr=br__default.default.userInfo().uid,kr=br__default.default.userInfo().gid;var un=1e3,Tr=!!xe__default.default.getuid;xe__default.default.getuid?!xe__default.default.getuid():false;var ln=128;var Rr=e=>e instanceof Error&&"code"in e;var it=e=>typeof e=="string",at=e=>e===void 0;var Nr=xe__default.default.platform==="linux",ct=xe__default.default.platform==="win32";var fn=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];ct||fn.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");Nr&&fn.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED");var Ir=fn;var dn=class{constructor(){this.callbacks=new Set,this.exited=false,this.exit=t=>{if(!this.exited){this.exited=true;for(let n of this.callbacks)n();t&&(ct&&t!=="SIGINT"&&t!=="SIGTERM"&&t!=="SIGKILL"?xe__default.default.kill(xe__default.default.pid,"SIGTERM"):xe__default.default.kill(xe__default.default.pid,t));}},this.hook=()=>{xe__default.default.once("exit",()=>this.exit());for(let t of Ir)try{xe__default.default.once(t,()=>this.exit(t));}catch{}},this.register=t=>(this.callbacks.add(t),()=>{this.callbacks.delete(t);}),this.hook();}},Pr=new dn;var po=Pr.register,Or=po;var A={store:{},create:e=>{let t=`000000${Math.floor(Math.random()*16777215).toString(16)}`.slice(-6),s=`.tmp-${Date.now().toString().slice(-10)}${t}`;return `${e}${s}`},get:(e,t,n=true)=>{let r=A.truncate(t(e));return r in A.store?A.get(e,t,n):(A.store[r]=n,[r,()=>delete A.store[r]])},purge:e=>{A.store[e]&&(delete A.store[e],x.attempt.unlink(e));},purgeSync:e=>{A.store[e]&&(delete A.store[e],x.attempt.unlinkSync(e));},purgeSyncAll:()=>{for(let e in A.store)A.purgeSync(e);},truncate:e=>{let t=he__default.default.basename(e);if(t.length<=ln)return e;let n=/^(\.?)(.*?)((?:\.[^.]+)?(?:\.tmp-\d{10}[a-f0-9]{6})?)$/.exec(t);if(!n)return e;let r=t.length-ln;return `${e.slice(0,-t.length)}${n[1]}${n[2].slice(0,-r)}${n[3]}`}};Or(A.purgeSyncAll);var Fe=A;function M(e,t=xr){if(it(t))return M(e,{encoding:t});let n=Date.now()+((t.timeout??un)||-1);return x.retry.readFileSync(n)(e,t)}function O(e,t,n=_r){if(it(n))return O(e,t,{encoding:n});let r=Date.now()+((n.timeout??un)||-1),s=null,o=null,i=null;try{let a=x.attempt.realpathSync(e),c=!!a;e=a||e,[o,s]=Fe.get(e,n.tmpCreate||Fe.create,n.tmpPurge!==!1);let l=Tr&&at(n.chown),f=at(n.mode);if(c&&(l||f)){let u=x.attempt.statSync(e);u&&(n={...n},l&&(n.chown={uid:u.uid,gid:u.gid}),f&&(n.mode=u.mode));}if(!c){let u=he__default.default.dirname(e);x.attempt.mkdirSync(u,{mode:Er,recursive:!0});}i=x.retry.openSync(r)(o,"w",n.mode||cn),n.tmpCreated&&n.tmpCreated(o),it(t)?x.retry.writeSync(r)(i,t,0,n.encoding||Sr):at(t)||x.retry.writeSync(r)(i,t,0,t.length,0),n.fsync!==!1&&(n.fsyncWait!==!1?x.retry.fsyncSync(r)(i):x.attempt.fsync(i)),x.retry.closeSync(r)(i),i=null,n.chown&&(n.chown.uid!==Cr||n.chown.gid!==kr)&&x.attempt.chownSync(o,n.chown.uid,n.chown.gid),n.mode&&n.mode!==cn&&x.attempt.chmodSync(o,n.mode);try{x.retry.renameSync(r)(o,e);}catch(u){if(!Rr(u)||u.code!=="ENAMETOOLONG")throw u;x.retry.renameSync(r)(o,Fe.truncate(e));}s(),o=null;}finally{i&&x.attempt.closeSync(i),o&&Fe.purge(o);}}var $=v(vscode.window.createOutputChannel(mr));function pn(e){return (...t)=>{$.appendLine(`[${e}] ${t.join(" ")}`);}}var w={info:pn("INFO"),warn:pn("WARN"),error:pn("ERROR"),append:$.append.bind($),appendLine:$.appendLine.bind($),replace:$.replace.bind($),clear:$.clear.bind($),show:$.show.bind($),hide:$.hide.bind($)};function vo(e){let t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?"":e.substring(0,t)}var K=(()=>{let e=vscode.env.appRoot;if(e&&p__default.default.existsSync(e))return D__default.default.join(e,"out");let t=In.main?.filename.replace(/\\/g,"/");if(!t){let n="Cannot determine main file name";throw N(n),new Error(n)}return vo(t)})(),ut=D__default.default.join(K,"vs","code"),Mr=D__default.default.join(K,"vs","workbench");function $r(e){return D__default.default.join(Mr,"contrib","webview","browser","pre",`index.${e}`)}var Lr=$r("html"),Fr=$r(`${W}.html`);function ft(e,t){let n=t?`${t}.${e}`:e;return D__default.default.join(Mr,vscode.env.appHost==="desktop"?`workbench.desktop.main.${n}`:`workbench.web.main.${n}`)}var Wr=ft("css"),Vr=ft("css",W),Ur=ft("js"),jr=ft("js",W);function Hr(e,t){let n=t?`${t}.${e}`:e,r=D__default.default.join(ut,"electron-main",`main.${n}`);return p__default.default.existsSync(r)?r:D__default.default.join(K,`main.${n}`)}var Br=Hr("js"),Kr=Hr("js",W);function Gr(e,t){let n=t?`${t}.${e}`:e;return D__default.default.join(D__default.default.dirname(K),`product.${n}`)}var dt=Gr("json"),Jr=Gr("json",`${vscode.version}.${W}`),zr=["electron-sandbox/workbench","electron-browser/workbench"],ne=(()=>{for(let e of zr){let t=D__default.default.join(ut,e);if(p__default.default.existsSync(t))return t}return ""})(),Yr=["workbench.html","workbench-dev.html","workbench.esm.html","workbench-dev.esm.html"],We=(()=>{if(!ne)return "";for(let e of Yr){let t=D__default.default.join(ne,e);if(p__default.default.existsSync(t))return t}return ""})();function qr(){return ne?We?"Workbench html file found. You should not see this message.":`Cannot find the workbench html file in ${ne}, known files are [${Yr}]. File tree: ${hn(ne)}`:`Cannot find the workbench html dir in ${ut}, known dirs are [${zr}]. File tree: ${hn(ut)}`}var Qr=We.replace(".html",`.${W}.html`),mn="external.css",gn="external.js",yn="external.module.js",vn=D__default.default.join(ne,mn),wn=D__default.default.join(ne,gn),bn=D__default.default.join(ne,yn),pt=D__default.default.join(ne,"external.cache.json");async function Zr(){let e;switch(process.platform){case "darwin":e=await wo();break;case "win32":e=await bo();break;default:e=await So();}e.unref();}function En(...e){for(let t of e){if(!p__default.default.existsSync(t))continue;let n=p__default.default.readdirSync(t).filter(r=>!r.includes("-tunnel"));if(process.platform==="win32"){if(n=n.filter(r=>r.endsWith(".cmd")),n.length>0)return he__default.default.join(t,n[0])}else if(n.length>0)return he__default.default.join(t,n[0])}throw new Error(`Cannot find binary path in [${e}]`)}async function wo(){let{nameLong:e}=JSON.parse(M(dt,"utf-8")),t=/(.*\.app)\/Contents\/Frameworks\//.exec(process.execPath),n=t?t[1]:`/Applications/${e}.app`,r=En(`${n}/Contents/Resources/app/bin/`);return child_process.spawn("osascript",["-e",`quit app "${e}"`,"-e","repeat with i from 1 to 100","-e",`if not (application "${e}" is running) then exit repeat`,"-e","delay 0.1","-e","end repeat","-e",`do shell script quoted form of "${r}"`],{detached:true,stdio:"ignore"})}async function bo(){let e=he__default.default.dirname(process.execPath),t=he__default.default.basename(process.execPath,".exe"),n=En(`${e}\\bin\\`,`${he__default.default.dirname(K)}\\bin\\`),r=["for ($i = 0; $i -lt 100; $i++) {",`    $vscodeProcess = Get-Process '${t}' -ErrorAction SilentlyContinue;`,"    if ($vscodeProcess -eq $null) {","        exit","    }","    Start-Sleep -Milliseconds 100","}"].join(""),s=`taskkill /F /IM "${t}.exe" >nul && powershell -Command "${r}" && "${n}"`;return child_process.spawn(process.env.comspec??"cmd",[`/C ${s}`],{detached:true,stdio:"ignore",windowsVerbatimArguments:true})}async function So(){let e=he__default.default.dirname(process.execPath),t=En(`${e}/bin/`),n=he__default.default.basename(process.execPath);return child_process.spawn("/bin/sh",["-c",`
      pkill -f "${n}"
      counter=0
      while pgrep -f "${n}" > /dev/null && [ $counter -lt 100 ]; do
        sleep 0.1
        counter=$((counter + 1))
      done
      "${t}"
      `],{detached:true,stdio:"ignore"})}var _e="file://",mt="https://",Ve=D__default.default.join(K,`__${W}__.lock`),es=ns();function ns(){return JSON.stringify(d.electron)}function ko(e){let t=ns();if(es!==t){if(e)return;let n=process.platform==="darwin"?'Press "Command + Q"':"Close all windows";V(`Note: Please TOTALLY restart VSCode (${n}) to take effect, "custom-ui-style.electron" is changed`);}es=t;}async function xn(e,t,n){let r=5,s=()=>p__default.default.existsSync(Ve);for(;s()&&r--;)w.warn("Lock file detected, waiting..."),await new Promise(i=>setTimeout(i,1e3));if(!r)if(s()&&Number(M(Ve,"utf-8"))-Date.now()>6e5)w.warn("Lock file timeout, remove and continue"),p__default.default.rmSync(Ve);else {N("File locked, please retry later");return}let o=true;try{O(Ve,String(Date.now()));}catch(i){if(i instanceof Error){let a="This extension need to modify VSCode's source code but";if("code"in i&&i.code==="EROFS"){N(`${a} it runs on read-only filesystem. Maybe you need to choose another way to install VSCode`,i);return}else if(i.message.includes("Maximum call stack size exceeded")){N(`${a} current user is not allowed. Please run "sudo chown -R $(whoami) '${D__default.default.dirname(K)}'" to grant permissions`,i);return}}N("Unknown error in npm:atomically",i);return}try{ko(t),await n();}catch(i){N("Fail to execute action",i),o=false;}finally{try{p__default.default.rmSync(Ve);}catch{}}if(o){let i=false;if(d.reloadWithoutPrompting)i=true;else {let a=await V(e,t?"Restart APP":"Reload Window","Cancel");i=a==="Reload Window"||a==="Restart APP";}if(i)if(t)try{await Zr();}catch(a){N("Fail to restart VSCode",a);}else vscode.commands.executeCommand("workbench.action.reloadWindow");}}function N(e,t){if(t instanceof Error){let n=`${e}, ${t}`;w.error(n),V(n);}else t?(w.error(e,t),V(`${e}, Error: ${t}`)):(w.error(e),V(`Error: ${e}`));w.show();}function z(e){w.warn(e),V(e,"Show logs").then(t=>{t==="Show logs"&&w.show();});}async function V(e,...t){try{return await vscode.window.showInformationMessage(e,...t)}catch(n){N("VSCode error",n);}}function Ce(e){return e.replaceAll("'","\\'").replaceAll('"','\\"')}function rs(e,t){let n;return (...r)=>{clearTimeout(n),n=setTimeout(()=>e(...r),t);}}function gt(e){function t(r,s=""){for(let[o,i]of Object.entries(r))switch(typeof i){case "string":case "number":s+=`${o}:${i};`;break;case "object":i&&(s+=`${o}{${t(i)}}`);break}return s}let n="";for(let[r,s]of Object.entries(e)){let o="";switch(typeof s){case "string":o=s;break;case "object":o=t(s);break;default:continue}n+=`${r}{${o}}`;}return n}function ss(e){return e.startsWith("file://")?xo__default.default.fileURLToPath(_n(e)):e}var To=/\$\{([^{}]+)\}/g;function _n(e){return e.replace(To,(t,n)=>{if(n==="userHome")return br__default.default.homedir();if(n.startsWith("env:")){let[r,s,o]=n.split(":");return process.env[s]??o??""}else return t})}function hn(e){let t=p__default.default.readdirSync(e,{recursive:true});return JSON.stringify(t,null,2)}var k=class{constructor(t,n){this.srcPath=t;this.bakPath=n;}get hasBakFile(){return p__default.default.existsSync(this.bakPath)}skipAll;async reload(){let t=await this.skipAll?.();if(t){z(t);return}this.hasBakFile||(w.warn(`Backup file [${this.bakPath}] does not exist, backuping...`),p__default.default.cpSync(this.srcPath,this.bakPath),w.info(`Create backup file [${this.bakPath}]`));let n=await this.patch(M(this.bakPath,"utf-8"));O(this.srcPath,n),w.info(`Config reload [${this.srcPath}]`);}async rollback(){this.hasBakFile?(O(this.srcPath,M(this.bakPath,"utf-8")),w.info(`Config rollback [${this.srcPath}]`)):w.warn(`Backup file [${this.bakPath}] does not exist, skip rollback`);}};var Cn={win:"Consolas, 'Courier New'",mac:"Menlo, Monaco, 'Courier New'",linux:"'Droid Sans Mono', 'monospace'"},me={win:'"Segoe WPC", "Segoe UI"',mac:"-apple-system, BlinkMacSystemFont",linux:'system-ui, "Ubuntu", "Droid Sans"'},kn='"SF Mono", Monaco, Menlo, Consolas, "Ubuntu Mono", "Liberation Mono", "DejaVu Sans Mono", "Courier New", monospace',yt=class extends k{constructor(){super(Ur,jr);}patch(t){let{monospace:n,sansSerif:r}=Ee();return n&&(n=Ce(n),t=t.replaceAll(Cn.win,n).replaceAll(Cn.mac,n).replaceAll(Cn.linux,n).replaceAll(kn,n)),r&&(r=Ce(r),t=t.replaceAll(me.win,r).replaceAll(me.mac,r).replaceAll(me.linux,r)),t}};function Do(e){return e=e.replace(/\\/g,"/"),e.startsWith(_e)?vscode.Uri.parse(e.replace(_e,"vscode-file://vscode-app")).toString():e}function No(){let e=d["background.url"]||_n(d["background.syncURL"]||"");return e?`
body:has(div[role=application]) {
  background-size: ${d["background.size"]};
  background-repeat: no-repeat;
  background-attachment: fixed; /* for code-server */
  background-position: ${d["background.position"]};
  opacity: ${d["background.opacity"]};
  background-image: url('${Do(e)}');
}`:""}function Io(){let e="",{monospace:t,sansSerif:n}=Ee();return t&&(e+=`
body {
  --cus-monospace-font: ${t}, ${kn};
}
span.monaco-keybinding-key,
.setting-list-row,
kbd {
  font-family: var(--cus-monospace-font) !important;
}
.windows,
.mac,
.linux {
  --monaco-monospace-font: var(--cus-monospace-font) !important;
}`),n&&(e+=`
body {
  --cus-sans-font: ${n};
}
.windows {
  font-family: var(--cus-sans-font), ${me.win} !important;
}
.mac {
  font-family: var(--cus-sans-font), ${me.mac} !important;
}
.linux {
  font-family: var(--cus-sans-font), ${me.linux} !important;
}`),e}var vt=class extends k{constructor(){super(Wr,Vr);}patch(t){return `${t}
/* Custom UI Style Start */
${No()}
${Io()}
${gt(d.stylesheet)}
/* Custom UI Style End */
`}};function Oo(e){let t=he__default.default.parse(e);return he__default.default.join(t.dir,`${t.name}.custom-ui-style${t.ext}`)}function Ao(e){if(e.length<3||!e.startsWith("/"))return e;let t=e.lastIndexOf("/");if(t<=0)return e;let n=e.slice(1,t);if(n.length===0)return e;let r=e.slice(t+1);if(!/^[gimsuy]*$/.test(r))return e;try{return new RegExp(n,r)}catch(s){return w.error(s),e}}var Rn=class extends k{constructor(n){super(n.filePath,Oo(n.filePath));this.config=n;}patch(n){return n.replace(Ao(this.config.find),this.config.replace)}};function is(){if(!d["extensions.enable"]||!d["extensions.config"])return [];let e=[];for(let[t,n]of Object.entries(d["extensions.config"])){let r=vscode.extensions.getExtension(t)?.extensionPath;if(!r){z(`No such extension: ${t}, skip patch`);continue}if(!Array.isArray(n)){z(`Config should be an array, skip patching ${t}`);continue}let s=[];for(let o of n)o.filePath&&o.find&&o.replace?e.push(new Rn({...o,filePath:he__default.default.join(r,o.filePath)})):s.push(o);s.length>0&&z(`Configs of ${t} are invalid: ${JSON.stringify(s,null,2)}`);}return e}var $o="/* EMPTY EXTERNAL CSS */",Lo="// EMPTY EXTERNAL JS",Fo="// EMPTY EXTERNAL JS MODULE",as=false;async function Wo(e){!as&&e.some(n=>typeof n=="object"&&n.type.startsWith(".js")||typeof n=="string"&&n.startsWith("http")&&n.endsWith(".js"))&&(V("Loading remote JS script, be care of its source code!"),as=true);let t=[];for(let n of e){let r=await fs(n);r&&t.push(r);}return t}var Vo=/[^\x20-\x7F]/g;function Uo(e){return (e.match(Vo)||[]).length/e.length>.5}var jo="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36";async function fs(e){let t;if(typeof e=="string"){if(e.endsWith(".css"))t="css";else if(e.endsWith(".js"))t="js-module";else {z(`Unsupported extension: [${e}]. Must be '.css' or '.js'`);return}if(e.startsWith(mt))return await fs({type:t,url:e});if(!e.startsWith(_e)){z(`[${e}] must startsWith '${_e}'`);return}return await cs(t,ss(e),n=>M(n,"utf-8"))}else {if(!e.url.startsWith(mt)){z(`[${e.url}] must startsWith '${mt}'`);return}return await cs(e.type,new URL(e.url).toString(),Ho)}}async function Ho(e,t){let r=await(await fetch(e,{headers:{"User-Agent":jo}})).text();if(!Uo(r))return r;let s=`The content of ${e} may be garbled`;return w.warn(`${s}
${r}`),await V(`${s}: ${r.substring(0,100)}`,"Skip And Show Details","Apply at my own risk")==="Apply at my own risk"?(w.warn(`Apply ${e}`),r):(w.show(),t==="css"?`/* ${s}, skip */`:`// ${s}, skip`)}async function cs(e,t,n){return [e,t,async()=>{try{return await n(t,e)}catch(r){N(`Fail to get content of [${t}]`,r);return}}]}async function Bo(e,t){if(t){let s={hasFailed:true,urls:[]};try{t&&p__default.default.existsSync(pt)&&(s=JSON.parse(M(pt,"utf-8")));}catch(i){N("Failed to read cache file",i);}let o=new Set(e.map(([i,a])=>`${i}:${a}`));if(!s.hasFailed&&o.size===s.urls.length&&[...o].every(i=>s.urls.includes(i))){w.info("No changes detected and no failed fetches, using cached content");return}}let n={css:[],js:[],"js-module":[]},r;t&&(r={hasFailed:false,urls:[]});for(let[s,o,i]of e){let a=await i();t&&(r.urls.push(`${s}:${o}`),!r.hasFailed&&!a&&(r.hasFailed=true)),a&&n[s].push({url:o,content:a});}if(t)try{O(pt,JSON.stringify(r,null,2),"utf-8");}catch(s){N("Failed to write cache file",s);}try{let s=`

`;O(vn,n.css.length>0?n.css.map(o=>`/* ${o.url} */
${o.content}`).join(s):$o,"utf-8"),O(wn,n.js.length>0?n.js.map(o=>`// ${o.url}
${o.content}`).join(s):Lo,"utf-8"),O(bn,n["js-module"].length>0?n["js-module"].map(o=>`// ${o.url}
${o.content}`).join(s):Fo,"utf-8");}catch(s){N("Failed to write external files",s);}}var us='<script src="./workbench.js" type="module"></script>',ls='<link rel="stylesheet" href="../../../workbench/workbench.desktop.main.css">',wt=class extends k{constructor(){super(We,Qr),We||(N(qr()),this.skipAll=()=>"No workbench html found, external resources are disabled");}async patch(t){let n=d["external.loadStrategy"];return n==="disable"?(O(vn,void 0),O(wn,void 0),O(bn,void 0),t):(await Bo(await Wo(d["external.imports"]||[]),n==="cache"),t.replace(us,`${us}
	<!-- External Script Start -->
	<script src="./${gn}"></script>
	<script src="./${yn}" type="module"></script>
	<!-- External Script End -->
`).replace(ls,`<!-- External Style Start -->
		<link rel="stylesheet" href="./${mn}"></link>
		<!-- External Style End -->
		${ls}`))}};function Jo(e){return crypto.createHash("sha256").update(M(e)).digest("base64").replace(/=+$/,"")}var bt=class extends k{constructor(){super(dt,Jr);}patch(t){let n=JSON.parse(t);for(let[r,s]of Object.entries(n.checksums)){let o=Jo(he__default.default.join(K,r));o!==s&&(n.checksums[r]=o);}return JSON.stringify(n,null,"	")}};var ds="experimentalDarkMode:!0",zo=/setBackgroundColor\([\w.]+\);/g,St=class extends k{constructor(){super(Br,Kr);}patch(t){let n=t.replaceAll(ds,`${ds},${JSON.stringify(d.electron).slice(1,-1)}`);return "backgroundColor"in d.electron&&(n=n.replace(zo,`setBackgroundColor("${d.electron.backgroundColor}");`)),n}};var ps="blockquote {",qo=[".font-mono","code","pre",".mono",".monospace","kbd"],Qo=[".font-sans",".github-markdown-body"];function Xo(){let{monospace:e,sansSerif:t}=Ee(),n="";if(e){let r=[...qo,...d["webview.monospaceSelector"]||[]];n+=`${r}{font-family:${Ce(e)}!important}`;}if(t){let r=[...Qo,...d["webview.sansSerifSelector"]||[]];n+=`${r}{font-family:${Ce(t)}!important}`;}return d["webview.stylesheet"]&&(n+=gt(d["webview.stylesheet"])),n}function Zo(e,t){if(t)return e.replace('meta http-equiv="Content-Security-Policy"','meta http-equiv=""');let[,n]=e.match(/<script async=?"{0,2} type="module">([\s\S]*?)<\/script>/)||[];if(!n)return e;let r=crypto.createHash("sha256").update(n).digest("base64");return w.info("update script sha256",r),e.replace(/'sha256-[^']*'/,`'sha256-${r}'`)}var Et=class extends k{constructor(){super(Lr,Fr);}patch(t){return d["webview.enable"]?Zo(t.replace(ps,`${Xo()}

			${ps}`),d["webview.removeCSP"]):t}};var hs=(()=>{let e=vscode.version.split(".").map(Number);return e[0]===1&&e[1]>=95})();function ms(){let e=[new vt,new St,new yt,new wt,new Et,new bt,...is()];return {hasBakFile:()=>e.every(t=>t.hasBakFile),reload:async t=>{await xn(t,hs||d.preferRestart,async()=>{for(let n of e)await n.reload();});},rollback:async t=>{await xn(t,hs||d.preferRestart,()=>Promise.all(e.map(n=>n.rollback())));}}}var Dn="UI Style changed.",ti="UI Style rollback.",{activate:fu,deactivate:du}=lr(()=>{let{hasBakFile:e,reload:t,rollback:n}=ms();e()||V("Seems like first time use or new version is installed, initialize and reload config now?","Yes","No").then(s=>s==="Yes"&&t(Dn)),nn(rn.reload,()=>t(Dn)),nn(rn.rollback,()=>n(ti));let r=()=>V("Configuration changed, apply now?","Yes","No").then(s=>s==="Yes"&&t(Dn));v(vscode.workspace.onDidChangeConfiguration(rs(s=>{if(d.watch){if(s.affectsConfiguration(W))r();else if(s.affectsConfiguration(ot)&&!d["font.monospace"]){let{globalValue:o,workspaceValue:i}=vscode.workspace.getConfiguration().inspect(ot);o===i&&r();}}},1e3)));});exports.activate=fu;exports.deactivate=du;