"use strict";exports.id=1855,exports.ids=[1855],exports.modules={21855:(_n,Ut,d)=>{d.d(Ut,{getDefaultRoleAssumer:()=>Ft,getDefaultRoleAssumerWithWebIdentity:()=>Gt});var ie=d(34546),Qe=d(8029),r=d(93980);const Ot=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),qe={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class _ extends r.TJ{constructor(s){super(s),Object.setPrototypeOf(this,_.prototype)}}class ce extends _{constructor(s){super({name:"ExpiredTokenException",$fault:"client",...s}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,ce.prototype)}}class ae extends _{constructor(s){super({name:"MalformedPolicyDocumentException",$fault:"client",...s}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,ae.prototype)}}class de extends _{constructor(s){super({name:"PackedPolicyTooLargeException",$fault:"client",...s}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,de.prototype)}}class le extends _{constructor(s){super({name:"RegionDisabledException",$fault:"client",...s}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,le.prototype)}}class fe extends _{constructor(s){super({name:"IDPRejectedClaimException",$fault:"client",...s}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,fe.prototype)}}class me extends _{constructor(s){super({name:"InvalidIdentityTokenException",$fault:"client",...s}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,me.prototype)}}class ue extends _{constructor(s){super({name:"IDPCommunicationErrorException",$fault:"client",...s}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,ue.prototype)}}class he extends _{constructor(s){super({name:"InvalidAuthorizationMessageException",$fault:"client",...s}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,he.prototype)}}const Q=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:r.$H}}),Bt=e=>({...e,...e.Credentials&&{Credentials:Q(e.Credentials)}}),wn=e=>({...e,...e.SAMLAssertion&&{SAMLAssertion:SENSITIVE_STRING}}),Tn=e=>({...e,...e.Credentials&&{Credentials:Q(e.Credentials)}}),jt=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:r.$H}}),Ht=e=>({...e,...e.Credentials&&{Credentials:Q(e.Credentials)}}),Dn=e=>({...e,...e.Credentials&&{Credentials:Q(e.Credentials)}}),$n=e=>({...e,...e.Credentials&&{Credentials:Q(e.Credentials)}});var Nt=d(12763),Vt=d(53127);const ye=(e,s)=>(0,Vt.w)(e,s).then(t=>{if(t.length){const n=new Nt.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(E,C)=>C.trim()===""&&C.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o;try{o=n.parse(t,!0)}catch(E){throw E&&typeof E=="object"&&Object.defineProperty(E,"$responseBodyText",{value:t}),E}const a="#text",i=Object.keys(o)[0],h=o[i];return h[a]&&(h[i]=h[a],delete h[a]),(0,r.rm)(h)}return{}}),Zt=async(e,s)=>{const t=await ye(e,s);return t.Error&&(t.Error.message=t.Error.message??t.Error.Message),t},Wn=(e,s)=>{if(s?.Error?.Code!==void 0)return s.Error.Code;if(s?.Code!==void 0)return s.Code;if(e.statusCode==404)return"NotFound"};var ge=d(90130);const Xt=async(e,s)=>{const t=K;let n;return n=F({...cs(e,s),[L]:zs,[z]:k}),M(s,t,"/",void 0,n)},Mn=async(e,s)=>{const t=K;let n;return n=F({...as(e,s),[L]:Fs,[z]:k}),M(s,t,"/",void 0,n)},Yt=async(e,s)=>{const t=K;let n;return n=F({...ds(e,s),[L]:Gs,[z]:k}),M(s,t,"/",void 0,n)},Kn=async(e,s)=>{const t=K;let n;return n=F({...ls(e,s),[L]:Us,[z]:k}),M(s,t,"/",void 0,n)},kn=async(e,s)=>{const t=K;let n;return n=F({...fs(e,s),[L]:Os,[z]:k}),M(s,t,"/",void 0,n)},Ln=async(e,s)=>{const t=K;let n;return n=F({...ms(e,s),[L]:Bs,[z]:k}),M(s,t,"/",void 0,n)},zn=async(e,s)=>{const t=K;let n;return n=F({...us(e,s),[L]:js,[z]:k}),M(s,t,"/",void 0,n)},Fn=async(e,s)=>{const t=K;let n;return n=F({...hs(e,s),[L]:Hs,[z]:k}),M(s,t,"/",void 0,n)},Jt=async(e,s)=>{if(e.statusCode>=300)return W(e,s);const t=await ye(e.body,s);let n={};return n=Rs(t.AssumeRoleResult,s),{$metadata:A(e),...n}},Gn=async(e,s)=>{if(e.statusCode>=300)return W(e,s);const t=await parseBody(e.body,s);let n={};return n=ps(t.AssumeRoleWithSAMLResult,s),{$metadata:A(e),...n}},Qt=async(e,s)=>{if(e.statusCode>=300)return W(e,s);const t=await ye(e.body,s);let n={};return n=vs(t.AssumeRoleWithWebIdentityResult,s),{$metadata:A(e),...n}},Un=async(e,s)=>{if(e.statusCode>=300)return W(e,s);const t=await parseBody(e.body,s);let n={};return n=Cs(t.DecodeAuthorizationMessageResult,s),{$metadata:A(e),...n}},On=async(e,s)=>{if(e.statusCode>=300)return W(e,s);const t=await parseBody(e.body,s);let n={};return n=bs(t.GetAccessKeyInfoResult,s),{$metadata:A(e),...n}},Bn=async(e,s)=>{if(e.statusCode>=300)return W(e,s);const t=await parseBody(e.body,s);let n={};return n=xs(t.GetCallerIdentityResult,s),{$metadata:A(e),...n}},jn=async(e,s)=>{if(e.statusCode>=300)return W(e,s);const t=await parseBody(e.body,s);let n={};return n=_s(t.GetFederationTokenResult,s),{$metadata:A(e),...n}},Hn=async(e,s)=>{if(e.statusCode>=300)return W(e,s);const t=await parseBody(e.body,s);let n={};return n=ws(t.GetSessionTokenResult,s),{$metadata:A(e),...n}},W=async(e,s)=>{const t={...e,body:await Zt(e.body,s)},n=Ns(e,t.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await qt(t,s);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await os(t,s);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await rs(t,s);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await is(t,s);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await ts(t,s);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await ns(t,s);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await es(t,s);case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await ss(t,s);default:const o=t.body;return Ls({output:e,parsedBody:o.Error,errorCode:n})}},qt=async(e,s)=>{const t=e.body,n=Ps(t.Error,s),o=new ce({$metadata:A(e),...n});return(0,r.Mw)(o,t)},es=async(e,s)=>{const t=e.body,n=Ts(t.Error,s),o=new ue({$metadata:A(e),...n});return(0,r.Mw)(o,t)},ts=async(e,s)=>{const t=e.body,n=Ds(t.Error,s),o=new fe({$metadata:A(e),...n});return(0,r.Mw)(o,t)},ss=async(e,s)=>{const t=e.body,n=$s(t.Error,s),o=new he({$metadata:A(e),...n});return(0,r.Mw)(o,t)},ns=async(e,s)=>{const t=e.body,n=Ws(t.Error,s),o=new me({$metadata:A(e),...n});return(0,r.Mw)(o,t)},os=async(e,s)=>{const t=e.body,n=Ms(t.Error,s),o=new ae({$metadata:A(e),...n});return(0,r.Mw)(o,t)},rs=async(e,s)=>{const t=e.body,n=Ks(t.Error,s),o=new de({$metadata:A(e),...n});return(0,r.Mw)(o,t)},is=async(e,s)=>{const t=e.body,n=ks(t.Error,s),o=new le({$metadata:A(e),...n});return(0,r.Mw)(o,t)},cs=(e,s)=>{const t={};if(e[$]!=null&&(t[$]=e[$]),e[H]!=null&&(t[H]=e[H]),e[I]!=null){const n=ne(e[I],s);e[I]?.length===0&&(t.PolicyArns=[]),Object.entries(n).forEach(([o,a])=>{const i=`PolicyArns.${o}`;t[i]=a})}if(e[P]!=null&&(t[P]=e[P]),e[p]!=null&&(t[p]=e[p]),e[V]!=null){const n=et(e[V],s);e[V]?.length===0&&(t.Tags=[]),Object.entries(n).forEach(([o,a])=>{const i=`Tags.${o}`;t[i]=a})}if(e[Ue]!=null){const n=Es(e[Ue],s);e[Ue]?.length===0&&(t.TransitiveTagKeys=[]),Object.entries(n).forEach(([o,a])=>{const i=`TransitiveTagKeys.${o}`;t[i]=a})}if(e[ve]!=null&&(t[ve]=e[ve]),e[N]!=null&&(t[N]=e[N]),e[Z]!=null&&(t[Z]=e[Z]),e[x]!=null&&(t[x]=e[x]),e[$e]!=null){const n=As(e[$e],s);e[$e]?.length===0&&(t.ProvidedContexts=[]),Object.entries(n).forEach(([o,a])=>{const i=`ProvidedContexts.${o}`;t[i]=a})}return t},as=(e,s)=>{const t={};if(e[$]!=null&&(t[$]=e[$]),e[Te]!=null&&(t[Te]=e[Te]),e[Le]!=null&&(t[Le]=e[Le]),e[I]!=null){const n=ne(e[I],s);e[I]?.length===0&&(t.PolicyArns=[]),Object.entries(n).forEach(([o,a])=>{const i=`PolicyArns.${o}`;t[i]=a})}return e[P]!=null&&(t[P]=e[P]),e[p]!=null&&(t[p]=e[p]),t},ds=(e,s)=>{const t={};if(e[$]!=null&&(t[$]=e[$]),e[H]!=null&&(t[H]=e[H]),e[je]!=null&&(t[je]=e[je]),e[We]!=null&&(t[We]=e[We]),e[I]!=null){const n=ne(e[I],s);e[I]?.length===0&&(t.PolicyArns=[]),Object.entries(n).forEach(([o,a])=>{const i=`PolicyArns.${o}`;t[i]=a})}return e[P]!=null&&(t[P]=e[P]),e[p]!=null&&(t[p]=e[p]),t},ls=(e,s)=>{const t={};return e[Ce]!=null&&(t[Ce]=e[Ce]),t},fs=(e,s)=>{const t={};return e[O]!=null&&(t[O]=e[O]),t},ms=(e,s)=>({}),us=(e,s)=>{const t={};if(e[_e]!=null&&(t[_e]=e[_e]),e[P]!=null&&(t[P]=e[P]),e[I]!=null){const n=ne(e[I],s);e[I]?.length===0&&(t.PolicyArns=[]),Object.entries(n).forEach(([o,a])=>{const i=`PolicyArns.${o}`;t[i]=a})}if(e[p]!=null&&(t[p]=e[p]),e[V]!=null){const n=et(e[V],s);e[V]?.length===0&&(t.Tags=[]),Object.entries(n).forEach(([o,a])=>{const i=`Tags.${o}`;t[i]=a})}return t},hs=(e,s)=>{const t={};return e[p]!=null&&(t[p]=e[p]),e[N]!=null&&(t[N]=e[N]),e[Z]!=null&&(t[Z]=e[Z]),t},ne=(e,s)=>{const t={};let n=1;for(const o of e){if(o===null)continue;const a=ys(o,s);Object.entries(a).forEach(([i,h])=>{t[`member.${n}.${i}`]=h}),n++}return t},ys=(e,s)=>{const t={};return e[He]!=null&&(t[He]=e[He]),t},gs=(e,s)=>{const t={};return e[De]!=null&&(t[De]=e[De]),e[Ee]!=null&&(t[Ee]=e[Ee]),t},As=(e,s)=>{const t={};let n=1;for(const o of e){if(o===null)continue;const a=gs(o,s);Object.entries(a).forEach(([i,h])=>{t[`member.${n}.${i}`]=h}),n++}return t},Ss=(e,s)=>{const t={};return e[xe]!=null&&(t[xe]=e[xe]),e[Be]!=null&&(t[Be]=e[Be]),t},Es=(e,s)=>{const t={};let n=1;for(const o of e)o!==null&&(t[`member.${n}`]=o,n++);return t},et=(e,s)=>{const t={};let n=1;for(const o of e){if(o===null)continue;const a=Ss(o,s);Object.entries(a).forEach(([i,h])=>{t[`member.${n}.${i}`]=h}),n++}return t},Ae=(e,s)=>{const t={};return e[Se]!=null&&(t[Se]=(0,r.lK)(e[Se])),e[D]!=null&&(t[D]=(0,r.lK)(e[D])),t},Rs=(e,s)=>{const t={};return e[R]!=null&&(t[R]=q(e[R],s)),e[T]!=null&&(t[T]=Ae(e[T],s)),e[b]!=null&&(t[b]=(0,r.xW)(e[b])),e[x]!=null&&(t[x]=(0,r.lK)(e[x])),t},ps=(e,s)=>{const t={};return e[R]!=null&&(t[R]=q(e[R],s)),e[T]!=null&&(t[T]=Ae(e[T],s)),e[b]!=null&&(t[b]=__strictParseInt32(e[b])),e[Ke]!=null&&(t[Ke]=__expectString(e[Ke])),e[Fe]!=null&&(t[Fe]=__expectString(e[Fe])),e[be]!=null&&(t[be]=__expectString(e[be])),e[j]!=null&&(t[j]=__expectString(e[j])),e[we]!=null&&(t[we]=__expectString(e[we])),e[x]!=null&&(t[x]=__expectString(e[x])),t},vs=(e,s)=>{const t={};return e[R]!=null&&(t[R]=q(e[R],s)),e[ze]!=null&&(t[ze]=(0,r.lK)(e[ze])),e[T]!=null&&(t[T]=Ae(e[T],s)),e[b]!=null&&(t[b]=(0,r.xW)(e[b])),e[Me]!=null&&(t[Me]=(0,r.lK)(e[Me])),e[j]!=null&&(t[j]=(0,r.lK)(e[j])),e[x]!=null&&(t[x]=(0,r.lK)(e[x])),t},q=(e,s)=>{const t={};return e[O]!=null&&(t[O]=(0,r.lK)(e[O])),e[ke]!=null&&(t[ke]=(0,r.lK)(e[ke])),e[Ge]!=null&&(t[Ge]=(0,r.lK)(e[Ge])),e[pe]!=null&&(t[pe]=(0,r.Y0)((0,r.t_)(e[pe]))),t},Cs=(e,s)=>{const t={};return e[Re]!=null&&(t[Re]=__expectString(e[Re])),t},Ps=(e,s)=>{const t={};return e[m]!=null&&(t[m]=(0,r.lK)(e[m])),t},Is=(e,s)=>{const t={};return e[Ie]!=null&&(t[Ie]=__expectString(e[Ie])),e[D]!=null&&(t[D]=__expectString(e[D])),t},bs=(e,s)=>{const t={};return e[B]!=null&&(t[B]=__expectString(e[B])),t},xs=(e,s)=>{const t={};return e[Oe]!=null&&(t[Oe]=__expectString(e[Oe])),e[B]!=null&&(t[B]=__expectString(e[B])),e[D]!=null&&(t[D]=__expectString(e[D])),t},_s=(e,s)=>{const t={};return e[R]!=null&&(t[R]=q(e[R],s)),e[Pe]!=null&&(t[Pe]=Is(e[Pe],s)),e[b]!=null&&(t[b]=__strictParseInt32(e[b])),t},ws=(e,s)=>{const t={};return e[R]!=null&&(t[R]=q(e[R],s)),t},Ts=(e,s)=>{const t={};return e[m]!=null&&(t[m]=(0,r.lK)(e[m])),t},Ds=(e,s)=>{const t={};return e[m]!=null&&(t[m]=(0,r.lK)(e[m])),t},$s=(e,s)=>{const t={};return e[m]!=null&&(t[m]=(0,r.lK)(e[m])),t},Ws=(e,s)=>{const t={};return e[m]!=null&&(t[m]=(0,r.lK)(e[m])),t},Ms=(e,s)=>{const t={};return e[m]!=null&&(t[m]=(0,r.lK)(e[m])),t},Ks=(e,s)=>{const t={};return e[m]!=null&&(t[m]=(0,r.lK)(e[m])),t},ks=(e,s)=>{const t={};return e[m]!=null&&(t[m]=(0,r.lK)(e[m])),t},A=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Nn=(e,s)=>collectBody(e,s).then(t=>s.utf8Encoder(t)),Ls=(0,r.jr)(_),M=async(e,s,t,n,o)=>{const{hostname:a,protocol:i="https",port:h,path:E}=await e.endpoint(),C={protocol:i,hostname:a,port:h,method:"POST",path:E.endsWith("/")?E.slice(0,-1)+t:E+t,headers:s};return n!==void 0&&(C.hostname=n),o!==void 0&&(C.body=o),new ge.Kd(C)},K={"content-type":"application/x-www-form-urlencoded"},k="2011-06-15",L="Action",O="AccessKeyId",zs="AssumeRole",Se="AssumedRoleId",T="AssumedRoleUser",Fs="AssumeRoleWithSAML",Gs="AssumeRoleWithWebIdentity",B="Account",D="Arn",j="Audience",R="Credentials",Ee="ContextAssertion",Us="DecodeAuthorizationMessage",Re="DecodedMessage",p="DurationSeconds",pe="Expiration",ve="ExternalId",Ce="EncodedMessage",Pe="FederatedUser",Ie="FederatedUserId",Os="GetAccessKeyInfo",Bs="GetCallerIdentity",js="GetFederationToken",Hs="GetSessionToken",be="Issuer",xe="Key",_e="Name",we="NameQualifier",P="Policy",I="PolicyArns",Te="PrincipalArn",De="ProviderArn",$e="ProvidedContexts",We="ProviderId",b="PackedPolicySize",Me="Provider",$="RoleArn",H="RoleSessionName",Ke="Subject",ke="SecretAccessKey",Le="SAMLAssertion",ze="SubjectFromWebIdentityToken",x="SourceIdentity",N="SerialNumber",Fe="SubjectType",Ge="SessionToken",V="Tags",Z="TokenCode",Ue="TransitiveTagKeys",Oe="UserId",z="Version",Be="Value",je="WebIdentityToken",He="arn",m="message",F=e=>Object.entries(e).map(([s,t])=>(0,r.$6)(s)+"="+(0,r.$6)(t)).join("&"),Ns=(e,s)=>{if(s.Error?.Code!==void 0)return s.Error.Code;if(e.statusCode==404)return"NotFound"};class Vs extends r.uB.classBuilder().ep({...qe}).m(function(s,t,n,o){return[(0,Qe.TM)(n,this.serialize,this.deserialize),(0,ie.rD)(n,s.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Bt).ser(Xt).de(Jt).build(){}class Zs extends r.uB.classBuilder().ep({...qe}).m(function(s,t,n,o){return[(0,Qe.TM)(n,this.serialize,this.deserialize),(0,ie.rD)(n,s.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(jt,Ht).ser(Yt).de(Qt).build(){}const tt="us-east-1",st=e=>{if(typeof e?.Arn=="string"){const s=e.Arn.split(":");if(s.length>4&&s[4]!=="")return s[4]}},nt=async(e,s,t)=>{const n=typeof e=="function"?await e():e,o=typeof s=="function"?await s():s;return t?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (provider)`,`${o} (parent client)`,`${tt} (STS default)`),n??o??tt},ot=(e,s)=>{let t,n;return async(o,a)=>{if(n=o,!t){const{logger:C=e?.parentClientConfig?.logger,region:Y,requestHandler:J=e?.parentClientConfig?.requestHandler,credentialProviderLogger:Je}=e,bn=await nt(Y,e?.parentClientConfig?.region,Je),xn=!it(J);t=new s({credentialDefaultProvider:()=>async()=>n,region:bn,requestHandler:xn?J:void 0,logger:C})}const{Credentials:i,AssumedRoleUser:h}=await t.send(new Vs(a));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${a.RoleArn}`);const E=st(h);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...E&&{accountId:E}}}},rt=(e,s)=>{let t;return async n=>{if(!t){const{logger:h=e?.parentClientConfig?.logger,region:E,requestHandler:C=e?.parentClientConfig?.requestHandler,credentialProviderLogger:Y}=e,J=await nt(E,e?.parentClientConfig?.region,Y),Je=!it(C);t=new s({region:J,requestHandler:Je?C:void 0,logger:h})}const{Credentials:o,AssumedRoleUser:a}=await t.send(new Zs(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);const i=st(a);return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...i&&{accountId:i}}}},Vn=e=>s=>e({roleAssumer:ot(s,s.stsClientCtor),roleAssumerWithWebIdentity:rt(s,s.stsClientCtor),...s}),it=e=>e?.metadata?.handlerProtocol==="h2";var ct=d(31758),Xs=d(46170),Ys=d(96692),at=d(33202),ee=d(57801),te=d(25158),Js=d(51320),oe=d(25263),Qs=d(50784),dt=d(42952);const qs=async(e,s,t)=>({operation:(0,dt.u)(s).operation,region:await(0,dt.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function en(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(s,t)=>({signingProperties:{config:s,context:t}})}}function lt(e){return{schemeId:"smithy.api#noAuth"}}const tn=e=>{const s=[];switch(e.operation){case"AssumeRoleWithSAML":{s.push(lt(e));break}case"AssumeRoleWithWebIdentity":{s.push(lt(e));break}default:s.push(en(e))}return s},sn=e=>({...e,stsClientCtor:Ye}),nn=e=>{const s=sn(e);return{...(0,Qs.h)(s)}},on={rE:"3.637.0"};var rn=d(68227),ft=d(59065),mt=d(34054),cn=d(62438),an=d(51461),se=d(75854),ut=d(32117),dn=d(88226),ln=d(94134),fn=d(42640),ht=d(61821);const mn=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";var Ne=d(20181);const un=(e,s=0,t=e.byteLength-s)=>{if(!mn(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Ne.Buffer.from(e,s,t)},hn=(e,s)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return s?Ne.Buffer.from(e,s):Ne.Buffer.from(e)},yn=e=>{const s=hn(e,"utf8");return new Uint8Array(s.buffer,s.byteOffset,s.byteLength/Uint8Array.BYTES_PER_ELEMENT)},Zn=e=>typeof e=="string"?fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),gn=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return un(e.buffer,e.byteOffset,e.byteLength).toString("utf8")};var An=d(6775),yt=d(5332);const gt="required",c="type",l="fn",f="argv",G="ref",At=!1,Ve=!0,U="booleanEquals",y="stringEquals",St="sigv4",Et="sts",Rt="us-east-1",u="endpoint",pt="https://sts.{Region}.{PartitionResult#dnsSuffix}",w="tree",X="error",Ze="getAttr",vt={[gt]:!1,[c]:"String"},Xe={[gt]:!0,default:!1,[c]:"Boolean"},Ct={[G]:"Endpoint"},Pt={[l]:"isSet",[f]:[{[G]:"Region"}]},g={[G]:"Region"},It={[l]:"aws.partition",[f]:[g],assign:"PartitionResult"},bt={[G]:"UseFIPS"},xt={[G]:"UseDualStack"},S={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:St,signingName:Et,signingRegion:Rt}]},headers:{}},v={},_t={conditions:[{[l]:y,[f]:[g,"aws-global"]}],[u]:S,[c]:u},wt={[l]:U,[f]:[bt,!0]},Tt={[l]:U,[f]:[xt,!0]},Dt={[l]:Ze,[f]:[{[G]:"PartitionResult"},"supportsFIPS"]},$t={[G]:"PartitionResult"},Wt={[l]:U,[f]:[!0,{[l]:Ze,[f]:[$t,"supportsDualStack"]}]},Mt=[{[l]:"isSet",[f]:[Ct]}],Kt=[wt],kt=[Tt],Sn={version:"1.0",parameters:{Region:vt,UseDualStack:Xe,UseFIPS:Xe,Endpoint:vt,UseGlobalEndpoint:Xe},rules:[{conditions:[{[l]:U,[f]:[{[G]:"UseGlobalEndpoint"},Ve]},{[l]:"not",[f]:Mt},Pt,It,{[l]:U,[f]:[bt,At]},{[l]:U,[f]:[xt,At]}],rules:[{conditions:[{[l]:y,[f]:[g,"ap-northeast-1"]}],endpoint:S,[c]:u},{conditions:[{[l]:y,[f]:[g,"ap-south-1"]}],endpoint:S,[c]:u},{conditions:[{[l]:y,[f]:[g,"ap-southeast-1"]}],endpoint:S,[c]:u},{conditions:[{[l]:y,[f]:[g,"ap-southeast-2"]}],endpoint:S,[c]:u},_t,{conditions:[{[l]:y,[f]:[g,"ca-central-1"]}],endpoint:S,[c]:u},{conditions:[{[l]:y,[f]:[g,"eu-central-1"]}],endpoint:S,[c]:u},{conditions:[{[l]:y,[f]:[g,"eu-north-1"]}],endpoint:S,[c]:u},{conditions:[{[l]:y,[f]:[g,"eu-west-1"]}],endpoint:S,[c]:u},{conditions:[{[l]:y,[f]:[g,"eu-west-2"]}],endpoint:S,[c]:u},{conditions:[{[l]:y,[f]:[g,"eu-west-3"]}],endpoint:S,[c]:u},{conditions:[{[l]:y,[f]:[g,"sa-east-1"]}],endpoint:S,[c]:u},{conditions:[{[l]:y,[f]:[g,Rt]}],endpoint:S,[c]:u},{conditions:[{[l]:y,[f]:[g,"us-east-2"]}],endpoint:S,[c]:u},{conditions:[{[l]:y,[f]:[g,"us-west-1"]}],endpoint:S,[c]:u},{conditions:[{[l]:y,[f]:[g,"us-west-2"]}],endpoint:S,[c]:u},{endpoint:{url:pt,properties:{authSchemes:[{name:St,signingName:Et,signingRegion:"{Region}"}]},headers:v},[c]:u}],[c]:w},{conditions:Mt,rules:[{conditions:Kt,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[c]:X},{conditions:kt,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[c]:X},{endpoint:{url:Ct,properties:v,headers:v},[c]:u}],[c]:w},{conditions:[Pt],rules:[{conditions:[It],rules:[{conditions:[wt,Tt],rules:[{conditions:[{[l]:U,[f]:[Ve,Dt]},Wt],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:v,headers:v},[c]:u}],[c]:w},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[c]:X}],[c]:w},{conditions:Kt,rules:[{conditions:[{[l]:U,[f]:[Dt,Ve]}],rules:[{conditions:[{[l]:y,[f]:[{[l]:Ze,[f]:[$t,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:v,headers:v},[c]:u},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:v,headers:v},[c]:u}],[c]:w},{error:"FIPS is enabled but this partition does not support FIPS",[c]:X}],[c]:w},{conditions:kt,rules:[{conditions:[Wt],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:v,headers:v},[c]:u}],[c]:w},{error:"DualStack is enabled but this partition does not support DualStack",[c]:X}],[c]:w},_t,{endpoint:{url:pt,properties:v,headers:v},[c]:u}],[c]:w}],[c]:w},{error:"Invalid Configuration: Missing Region",[c]:X}]},En=(e,s={})=>(0,yt.sO)(Sn,{endpointParams:e,logger:s.logger});yt.mw.aws=An.UF;const Rn=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??ht.E,base64Encoder:e?.base64Encoder??ht.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??En,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??tn,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4"),signer:new ft.f2},{schemeId:"smithy.api#noAuth",identityProvider:s=>s.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new te.mR}],logger:e?.logger??new r.N4,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??fn.D,utf8Decoder:e?.utf8Decoder??yn,utf8Encoder:e?.utf8Encoder??gn});var pn=d(12165);const vn=e=>{(0,r.I9)(process.version);const s=(0,pn.I)(e),t=()=>s().then(r.lT),n=Rn(e);return(0,rn.I)(process.version),{...n,...e,runtime:"node",defaultsMode:s,bodyLengthChecker:e?.bodyLengthChecker??dn.n,credentialDefaultProvider:e?.credentialDefaultProvider??mt.v6,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,cn.mJ)({serviceId:n.serviceId,clientVersion:on.rE}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4")||(async a=>await(0,mt.v6)(a?.__config||{})()),signer:new ft.f2},{schemeId:"smithy.api#noAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new te.mR}],maxAttempts:e?.maxAttempts??(0,se.Z)(oe.qs),region:e?.region??(0,se.Z)(ee.GG,ee.zH),requestHandler:ut.$c.create(e?.requestHandler??t),retryMode:e?.retryMode??(0,se.Z)({...oe.kN,default:async()=>(await t()).retryMode||ln.L0}),sha256:e?.sha256??an.V.bind(null,"sha256"),streamCollector:e?.streamCollector??ut.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,se.Z)(ee.e$),useFipsEndpoint:e?.useFipsEndpoint??(0,se.Z)(ee.Ko)}};var Lt=d(3119);const Cn=e=>{const s=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){const a=s.findIndex(i=>i.schemeId===o.schemeId);a===-1?s.push(o):s.splice(a,1,o)},httpAuthSchemes(){return s},setHttpAuthSchemeProvider(o){t=o},httpAuthSchemeProvider(){return t},setCredentials(o){n=o},credentials(){return n}}},Pn=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),re=e=>e,In=(e,s)=>{const t={...re((0,Lt.Rq)(e)),...re((0,r.xA)(e)),...re((0,ge.eS)(e)),...re(Cn(e))};return s.forEach(n=>n.configure(t)),{...e,...(0,Lt.$3)(t),...(0,r.uv)(t),...(0,ge.jt)(t),...Pn(t)}};class Ye extends r.Kj{constructor(...[s]){const t=vn(s||{}),n=Ot(t),o=(0,at.Dc)(n),a=(0,oe.$z)(o),i=(0,ee.TD)(a),h=(0,ct.OV)(i),E=(0,ie.Co)(h),C=nn(E),Y=In(C,s?.extensions||[]);super(Y),this.config=Y,this.middlewareStack.use((0,at.sM)(this.config)),this.middlewareStack.use((0,oe.ey)(this.config)),this.middlewareStack.use((0,Js.vK)(this.config)),this.middlewareStack.use((0,ct.TC)(this.config)),this.middlewareStack.use((0,Xs.Y7)(this.config)),this.middlewareStack.use((0,Ys.n4)(this.config)),this.middlewareStack.use((0,te.wB)(this.config,{httpAuthSchemeParametersProvider:qs,identityProviderConfigProvider:async J=>new te.h$({"aws.auth#sigv4":J.credentials})})),this.middlewareStack.use((0,te.lW)(this.config))}destroy(){super.destroy()}}const zt=(e,s)=>s?class extends e{constructor(n){super(n);for(const o of s)this.middlewareStack.use(o)}}:e,Ft=(e={},s)=>ot(e,zt(Ye,s)),Gt=(e={},s)=>rt(e,zt(Ye,s)),Yn=e=>s=>e({roleAssumer:Ft(s),roleAssumerWithWebIdentity:Gt(s),...s})}};
