"use strict";exports.id=3303,exports.ids=[3303],exports.modules={23303:(R,m,o)=>{o.d(m,{fromIni:()=>E});var c=o(70619),d=o(3631);const v=(e,s,n)=>{const i={EcsContainer:async t=>{const{fromHttp:r}=await o.e(705).then(o.bind(o,30705)),{fromContainerMetadata:l}=await Promise.resolve().then(o.bind(o,40728));return n?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),(0,d.cy)(r(t??{}),l(t))},Ec2InstanceMetadata:async t=>{n?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");const{fromInstanceMetadata:r}=await Promise.resolve().then(o.bind(o,40728));return r(t)},Environment:async t=>{n?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");const{fromEnv:r}=await Promise.resolve().then(o.bind(o,18974));return r(t)}};if(e in i)return i[e];throw new d.C1(`Unsupported credential source in profile ${s}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:n})},C=(e,{profile:s="default",logger:n}={})=>Boolean(e)&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(P(e,{profile:s,logger:n})||w(e,{profile:s,logger:n})),P=(e,{profile:s,logger:n})=>{const i=typeof e.source_profile=="string"&&typeof e.credential_source>"u";return i&&n?.debug?.(`    ${s} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),i},w=(e,{profile:s,logger:n})=>{const i=typeof e.credential_source=="string"&&typeof e.source_profile>"u";return i&&n?.debug?.(`    ${s} isCredentialSourceProfile credential_source=${e.credential_source}`),i},h=async(e,s,n,i={})=>{n.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");const t=s[e];if(!n.roleAssumer){const{getDefaultRoleAssumer:j}=await o.e(1855).then(o.bind(o,21855));n.roleAssumer=j({...n.clientConfig,credentialProviderLogger:n.logger,parentClientConfig:n?.parentClientConfig},n.clientPlugins)}const{source_profile:r}=t;if(r&&r in i)throw new d.C1(`Detected a cycle attempting to resolve credentials for profile ${(0,c.Bz)(n)}. Profiles visited: `+Object.keys(i).join(", "),{logger:n.logger});n.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${r?`source_profile=[${r}]`:`profile=[${e}]`}`);const l=r?g(r,{...s,[r]:{...s[r],role_arn:t.role_arn??s[r].role_arn}},n,{...i,[r]:!0}):(await v(t.credential_source,e,n.logger)(n))(),a={RoleArn:t.role_arn,RoleSessionName:t.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:t.external_id,DurationSeconds:parseInt(t.duration_seconds||"3600",10)},{mfa_serial:f}=t;if(f){if(!n.mfaCodeProvider)throw new d.C1(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:n.logger,tryNextLink:!1});a.SerialNumber=f,a.TokenCode=await n.mfaCodeProvider(f)}const O=await l;return n.roleAssumer(O,a)},S=e=>Boolean(e)&&typeof e=="object"&&typeof e.credential_process=="string",I=async(e,s)=>o.e(5419).then(o.bind(o,15419)).then(({fromProcess:n})=>n({...e,profile:s})()),A=async(e,s={})=>{const{fromSSO:n}=await o.e(3978).then(o.bind(o,23978));return n({profile:e,logger:s.logger})()},x=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),u=e=>Boolean(e)&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,y=(e,s)=>(s?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials"),Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}})),$=e=>Boolean(e)&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,b=async(e,s)=>o.e(9733).then(o.bind(o,29733)).then(({fromTokenFile:n})=>n({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:s.roleAssumerWithWebIdentity,logger:s.logger,parentClientConfig:s.parentClientConfig})()),g=async(e,s,n,i={})=>{const t=s[e];if(Object.keys(i).length>0&&u(t))return y(t,n);if(C(t,{profile:e,logger:n.logger}))return h(e,s,n,i);if(u(t))return y(t,n);if($(t))return b(t,n);if(S(t))return I(n,e);if(x(t))return await A(e,n);throw new d.C1(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:n.logger})},E=(e={})=>async()=>{e.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");const s=await(0,c.YU)(e);return g((0,c.Bz)(e),s,e)}}};
